<JZML>
<PROJECT version="5030" width="1024" height="724" osc_target="-1" midi_target="-1" kbmouse_target="-1" skin="Shaded"/>
<WINDOW class="JAZZINTERFACE" text="Default" x="0" y="0" width="1024" height="724" state="1" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Container" x="0" y="0" width="1024" height="724" id="7" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="Actions" x="0" y="0" width="1008" height="708" id="7" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="1">
<WINDOW class="Tab" text="Mixer" x="0" y="0" width="992" height="660" id="7" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Mixer" x="0" y="0" width="992" height="660" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="Main" x="0" y="100" width="116" height="544" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Fader" text="Level" x="0" y="0" width="100" height="466" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (z) {
	debug(displayName + ' Level: ' + currentValue);
	sendCC(levelCC, currentValue, displayName + ' Level');
	OnOff.x = 1;
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="0" y="476" width="100" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Main" label_on="Main" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="90.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	lastValue = Level.currentValue ? Level.currentValue : lastValue;
	debug(displayName + ' SWITCH ON! ' + Level.currentValue + ', ' + lastValue);
	//sendCC(activeCC, 64, displayName + ' Switch On');
	sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	//sendCC(activeCC, 0, displayName + ' Switch Off');
	sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="displayName=" value="'Main'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=" value="7" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Main/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
//log('levelCC: ' + levelCC);
if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Main/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voices" x="117" y="100" width="116" height="544" id="1" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Fader" text="Level" x="0" y="0" width="100" height="466" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.706633" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*66" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (z) {
	sendCC(levelCC, currentValue, displayName + ' Level');
	OnOff.x = 1;
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="0" y="476" width="100" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Voices" label_on="Voices" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="127.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	lastValue = Level.currentValue ? Level.currentValue : lastValue;
	debug(displayName + ' SWITCH ON! ' + Level.currentValue + ', ' + lastValue);
	//sendCC(activeCC, 64, displayName + ' Switch On');
	sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	//sendCC(activeCC, 0, displayName + ' Switch Off');
	sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="displayName=" value="'Voices'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=" value="85" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Voices/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
//log('levelCC: ' + levelCC);
if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Voices/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="DlyRvb" x="233" y="100" width="116" height="544" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Fader" text="Level" x="0" y="0" width="100" height="466" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.704082" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*66" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (z) {
	sendCC(levelCC, currentValue, displayName + ' Level');
	OnOff.x = 1;
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="0" y="476" width="100" height="52" id="14" state="241" group="0" font="tahoma,12,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Delay/Reverb" label_on="Delay/Reverb" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="127.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	lastValue = Level.currentValue ? Level.currentValue : lastValue;
	debug(displayName + ' SWITCH ON! ' + Level.currentValue + ', ' + lastValue);
	//sendCC(activeCC, 64, displayName + ' Switch On');
	sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	//sendCC(activeCC, 0, displayName + ' Switch Off');
	sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="displayName=" value="'Delay/Reverb'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=" value="86" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/DlyRvb/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//log('onLoad: ' + displayName);
displayName = 'Delay/Reverb'; //getattribute(getobject(), 'name');
//log('now: ' + displayName);
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
//log('levelCC: ' + levelCC);
if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/DlyRvb/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="LeadMute" x="0" y="0" width="116" height="72" id="3" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="0" width="100" height="54" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,32512" label_off="Dry" label_on="Dry" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/LeadMute/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/LeadMute/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/LeadMute/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Off');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
//	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 64, displayName + ' On');
	//sendCC(levelCC, 0, 'Switch Off');
}

//active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/LeadMute/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="activeCC=" value="13" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/LeadMute/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'LeadMute'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/LeadMute/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');

///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
setattribute(OnOff, 'color', { gray, green });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);

" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/LeadMute/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	OnOff.x = (val < 64);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/LeadMute/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Pitch" x="232" y="0" width="116" height="70" id="4" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="0" width="100" height="54" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,32512" label_off="Pitch" label_on="Pitch" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Pitch/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Pitch/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Pitch/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
//	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

//active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Pitch/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="activeCC=" value="107" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Pitch/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Pitch/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
setattribute(OnOff, 'color', { gray, green });

" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Pitch/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	OnOff.x = (val >= 64);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Pitch/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Tone" x="116" y="0" width="116" height="70" id="5" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="0" width="100" height="54" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,32512" label_off="Tone" label_on="Tone" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Tone/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Tone/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Tone/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
//	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

//active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Tone/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="activeCC=" value="106" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Tone/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Tone/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//log('onLoad: ' + displayName);
displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
setattribute(OnOff, 'color', { gray, green });

" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Tone/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	OnOff.x = val ? 1 : 0;
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Tone/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Reverb" x="476" y="64" width="100" height="580" id="7" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="84" height="52" id="14" state="241" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Reverb" label_on="Reverb" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="84" height="400" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.021277" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);


//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="84" height="84" id="18" state="241" group="0" font="tahoma,15,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="32512,8355711" label_off="Smooth Plate" label_on="Smooth Plate" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : -1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//log('onPress');;
//selecttab(FX, FX.reverbTabIndex);
selecttab(Actions, reverbTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl l = Actions.Reverb.Switches.currentLabel;
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.Reverb.Switches.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="91" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="52" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Reverb'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="1,'Smooth Plate',2,'Soft Hall',3,'Amsterdam Hall',4,'Broadway Hall',5,'Snappy Room',6,'Library',7,'Dark Room',8,'Music Club',9,'Studio Live Room',10,'Stretched Room',11,'Warehouse',12,'Bouncy Room',13,'Real Plate',14,'Reflection Plate',15,'Thin Plate',16,'Bright Chamber',17,'Bright Plate',18,'Real Plate Short',19,'Real Plate Long',20,'Wooden Chamber',21,'Jazz Plate',22,'Quick Plate',23,'St. Joseph Church',24,'Hockey Arena',25,'Dome Chapel',26,'Museum',27,'Indoor Arena',28,'Cozy Corner',29,'Thin Spring',30,'Full Spring'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="112" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Reverb/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//decl on = 1596013, off = 865343, gray = RGB(0.5, 0.5, 0.5);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special reverb load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Reverb/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Delay" x="576" y="64" width="100" height="580" id="8" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="86" height="52" id="14" state="241" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Delay" label_on="Delay" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="96.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
log('Delay mixer onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	//lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="86" height="400" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.340426" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="
if (z) {
 sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="86" height="86" id="18" state="241" group="0" font="tahoma,15,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="4144959,8355711" label_off="No Style" label_on="No Style" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//log('onPress');;
//selecttab(FX, FX.delayTabIndex);
selecttab(Actions, delayTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl l = Actions.Delay.Switches.currentLabel;
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.Delay.Switches.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="62" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="51" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'No Style',1,'Quarter',2,'Eighth',3,'Triplet',4,'Dotted',5,'Long Dot',6,'Long Trip',7,'Sixteenth',8,'Ping Pong 1',9,'Ping Pong 2',10,'Ping Pong 3',11,'Multitap 1',12,'Multitap 2',13,'Multitap 3',14,'Multitap 4',15,'Multitap 5',16,'Multitap 6',17,'Classic Slap',18,'Single Slap'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="117" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Delay/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//if (!displayName) 
displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special reverb load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
log2(displayName + ' onActive: ' + (active ? 'active' : 'NOT active'));
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Delay/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Double" x="676" y="64" width="100" height="580" id="9" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="86" height="52" id="14" state="241" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Double" label_on="Double" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="116.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="86" height="400" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.765957" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
	sendCC(levelCC, currentValue, displayName + ' Level');
	OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="86" height="86" id="18" state="241" group="0" font="tahoma,15,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="4144959,8355711" label_off="2 Voices Wide" label_on="2 Voices Wide" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//log('onPress');;
//selecttab(FX, FX.doubleTabIndex);
selecttab(Actions, doubleTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl l = Actions.Double.Switches.currentLabel;
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.Double.Switches.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="15" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="53" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'1 Voice Tight',1,'1 Voice Loose',2,'2 Voices Wide',3,'4 Voices Tight',4,'4 Voices Wide',5,'4 Voices Mono'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="111" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Double/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//if (!displayName) 
displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special reverb load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Double/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Transducer" x="876" y="64" width="100" height="580" id="10" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="86" height="52" id="14" state="241" group="0" font="tahoma,12,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Transducer" label_on="Transducer" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="86" height="86" id="18" state="241" group="0" font="tahoma,15,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="32512,8355711" label_off="Lowcut 2" label_on="Lowcut 2" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//log('onPress');;
//selecttab(FX, FX.transducerTabIndex);
selecttab(Actions, transducerTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl l = Actions.Transducer.Switches.currentLabel;
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.Transducer.Switches.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="86" height="400" id="20" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.677165" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-20 + (currentValue/127)*40" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="105" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="55" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'No Style',1,'Lowcut 1',2,'Lowcut 2',3,'Bandpass 1',4,'Bandpass 2',5,'Highcut',6,'Midcut',7,'Soft Drive',8,'Medium Drive',9,'Hard Drive',10,'Radio',11,'Radio Drive',12,'Peak Radio',13,'Boxey Radio',14,'Clear Megaphone',15,'Clip Megaphone',16,'Beat Box'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="118" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Transducer/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//if (!displayName) 
displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special reverb load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Transducer/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="uMod" x="776" y="64" width="100" height="580" id="6" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="86" height="52" id="14" state="241" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="uMod" label_on="uMod" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="94.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="86" height="400" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.297872" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="86" height="86" id="18" state="241" group="0" font="tahoma,15,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="4144959,8355711" label_off="Micromod Wider" label_on="Micromod Wider" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//selecttab(FX, FX.umodTabIndex);
selecttab(Actions, umodTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl l = Actions.uMod.Switches.currentLabel;
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.uMod.Switches.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="50" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'uMod'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="1,'Micromod Clone',2,'Micromod Wider',3,'Thicken',4,'Light Chorus',5,'Medium Chorus',6,'Wide Chorus',7,'Mono Chorus',8,'Fast Rotor',9,'Flanger',10,'Flange Feedback',11,'Flange Negative',12,'Mono Flange',13,'Soft Flange',14,'Panner',15,'Tube',16,'Up Tube',17,'Down Tube',18,'Down & Up Tube',19,'Rise and Fall',20,'Ottowa Wide',21,'Cylon Mono',22,'Cylon Stereo',23,'Alien Voiceover',24,'Underwater'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="116" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/uMod/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="if (!displayName) displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special umod load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
//log('special umod receive: ' + cc + ',' + val + ',' + src);
//log('styleCC: ' + styleCC);
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/uMod/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Harmony" x="358" y="64" width="118" height="580" id="11" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="510" width="102" height="52" id="14" state="241" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Harmony" label_on="Harmony" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="102" height="400" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.021277" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);


//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CurrentStyle" x="0" y="0" width="102" height="100" id="18" state="241" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="32512,8355711" label_off="  2 Above (High+Higher)" label_on="  2 Above (High+Higher)" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/CurrentStyle/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : -1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/CurrentStyle/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="//log('onPress');;
//selecttab(FX, FX.reverbTabIndex);
selecttab(Actions, harmonyTabIndex);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/CurrentStyle/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="decl i = Actions.Harmony.StyleMenu.selection;
decl l = Actions.Harmony.StyleMenu.labels[i];
log2('Setting harmony mixer label: ' + l);
decl this = getobject();
setattribute(this, 'label_off', l);
setattribute(this, 'label_on', l);" trigger_script="Actions.Harmony.StyleMenu.selection" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/CurrentStyle/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="12" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="56" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Harmony'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'1 Above (High)',1,'1 Below (Low)',2,'2 Low+High',3,'2 Above (High+Higher)',4,'2 Below (Lower+Low)',5,'2 (Higher+Lower)',6,'3 (Low+High+Higher)',7,'3 (Lower+Low+High)',8,'3 (Lower+High+Higher)',9,'3 (Lower+Low+High+Higher)',10,'4 Gospel High (Low+High+Higher)',11,'4 Gospel Low (Lower+Low+High)',12,'4 Upper Choir (High+Higher)',13,'4 Lower Choir (Low+Lower)',14,'4 Bass Boys (Low+Lower)'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="110" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Harmony/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//decl on = 1596013, off = 865343, gray = RGB(0.5, 0.5, 0.5);

setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');

//onStyleChange();

//log('special reverb load');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	//Switches.onReceive();
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Harmony/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Hardtune" x="360" y="-6" width="205" height="70" id="12" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="0" width="189" height="54" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="32512,32512" label_off="Stretched Room" label_on="Stretched Room" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Hardtune/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Hardtune/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Hardtune/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

//log2('x: ' + x);

//x = 0;
log2('hardtune: changing tab, x: ' + x);
selecttab(Actions, hardtuneTabIndex);
//x = 1;

/*
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
//	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}
*/
//active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="activeCC=" value="107.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Hardtune/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/Hardtune/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');

decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
//setattribute(OnOff, 'color', { gray, green });

updateLabel();
onActive();

" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="/*if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	OnOff.x = (val >= 64);
}*/" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="labelChange()" script="updateLabel();" trigger_script="Actions.Hardtune.TouchHardtune.currentLabel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/labelChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl active = Actions.Hardtune.active;
log2('Mixer hardtune active: ' + active);
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(OnOff, 'color', { active ? {green,green} : {gray, gray }});
OnOff.x = active;
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
//setattribute(Level, 'color', active ? highlightColor : gray);
//setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="Actions.Hardtune.active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateLabel()" script="
decl d = Profile.currentDevice;

decl this = getobject();
if (d == 'touch') {
decl l = Actions.Hardtune.TouchHardtune.currentLabel;
log2('Setting hardtune mixer label: ' + l);
//decl this = getobject();
setattribute(OnOff, 'label_off', l);
setattribute(OnOff, 'label_on', l);
} else {
	setattribute(OnOff, 'label_off', displayName + ': Off');
	setattribute(OnOff, 'label_on', displayName + ': On');

}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/Hardtune/updateLabel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="displayName=" value="'Mixer'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Mixer/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-84,-30208,-84" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onDeviceChange()" script="decl c = Profile.currentDevice;

log2('Mixer: onDeviceChanged: ' + c);

// Mixer
Main.levelCC = getProfile('outputCC');
Voices.levelCC = getProfile('voicesLevelCC');
DlyRvb.levelCC = getProfile('delayReverbLevelCC');
LeadMute.activeCC = getProfile('leadMuteCC');
Pitch.activeCC = getProfile('pitchCC');
Tone.activeCC = getProfile('toneCC');

Hardtune.updateLabel();

Harmony.styles = getProfile('harmonyStyles');
Harmony.styleCC = getProfile('harmonyStyleCC');
Harmony.activeCC = getProfile('harmonyCC');
//log2('Mixer, Harmony.activeCC: ' + Harmony.activeCC);
Harmony.levelCC = getProfile('harmonyLevelCC');

uMod.styles = getProfile('uModStyles');
uMod.activeCC = getProfile('umodCC');
uMod.levelCC = getProfile('umodLevelCC');
uMod.styleCC = getProfile('umodStyleCC');


Reverb.styles = getProfile('reverbStyles');
Reverb.activeCC = getProfile('reverbCC');
Reverb.levelCC = getProfile('reverbLevelCC');
Reverb.styleCC = getProfile('reverbStyleCC');


Delay.styles = getProfile('delayStyles');
Delay.activeCC = getProfile('delayCC');
Delay.levelCC = getProfile('delayLevelCC');
Delay.styleCC = getProfile('delayStyleCC');


Double.styles = getProfile('doubleStyles');
Double.activeCC = getProfile('doubleCC');
Double.levelCC = getProfile('doubleLevelCC');
Double.styleCC = getProfile('doubleStyleCC');

Transducer.styles = getProfile('transStyles');
Transducer.activeCC = getProfile('transCC');
Transducer.levelCC = getProfile('transLevelCC');
Transducer.styleCC = getProfile('transStyleCC');


" trigger_script="Profile.currentDevice" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/onDeviceChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//show(uMod.Switches, 0);
//show(Reverb.Switches, 0);
//show(Delay.Switches, 0);
//show(Double.Switches, 0);
//show(Transducer.Switches, 0);" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
Delay.onCC(cc, val, src);
DlyRvb.onCC(cc, val, src);
Double.onCC(cc, val, src);
LeadMute.onCC(cc, val, src);
Main.onCC(cc, val, src);
Pitch.onCC(cc, val, src);
Reverb.onCC(cc, val, src);
Tone.onCC(cc, val, src);
Transducer.onCC(cc, val, src);
uMod.onCC(cc, val, src);
Voices.onCC(cc, val, src);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Mixer/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Hardtune" x="0" y="0" width="992" height="660" id="1" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="HardtuneHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/HardtuneHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="35,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HardtuneHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HardtuneHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/HardtuneHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Hardtune">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HardtuneHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Container" text="Hardtune" x="0" y="100" width="992" height="553" id="19" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="RackHardtune" x="0" y="0" width="254" height="469" state="0" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Fader" text="Rate" x="0" y="20" width="80" height="407" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="1" physic="0" precision="0" unit="%" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,54,54" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/z" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,5,5" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x*100" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="cc=54" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/cc" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="output()" script="if (frame < 1) return;
decl val = round(x*127);
sendCC(cc,val, 'Rack hardtune');
" trigger_script="round(x*127)" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/RackHardtune/Rate/output" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Amount" x="80" y="20" width="80" height="407" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="1" physic="0" precision="0" unit="%" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,54,54" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/z" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,5,5" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x*100" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="cc=57" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/cc" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="output()" script="if (frame < 1) return;
decl val = round(x*127);
sendCC(cc,val, 'Rack Hardtune');
" trigger_script="round(x*127)" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/RackHardtune/Amount/output" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Window" x="160" y="20" width="80" height="407" id="3" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="1" physic="0" precision="0" unit=" cents" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,54,54" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/z" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,5,5" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=round((x*600)/10)*10" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="cc=49" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/cc" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="output()" script="if (frame < 1) return;
decl val = round(x*127);
sendCC(cc,val, 'Rack hardtune');
" trigger_script="round(x*127)" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/RackHardtune/Window/output" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="debugStr=" value="'target: 0 cc: 0 val: 0 channel: 3.000000'" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/RackHardtune/debugStr" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,640,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="//show(Monitor, showDebug);" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/RackHardtune/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
if (cc == Amount.cc) {
debug('rcva:' + val);
Amount.x = val/127;
} else if (cc == Rate.cc) {
debug('rcvr:' + val);
Rate.x = val/127;
} else if (cc == Window.cc) {
debug('rcvw:' + val);
Window.x = val/127;
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/RackHardtune/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="0" y="477" width="104" height="60" id="19" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="on()" script="if (frame < 1) return;
if (Profile.currentDevice == 'touch') {
	sendCC(styleCC, TouchHardtune.currentValue, 'Hardtune On');
} else {
	sendCC(activeCC, 64, 'Hardtune On');
}
active = 1;
//sendCC(styleCC, Style.currentValue, 'Delay On');
//sendCC(levelCC, Level.currentValue, 'Delay On');
//show(Style, x);
//show(Level, x);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/OnOff/on" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="off()" script="if (frame < 1) return;
if (Profile.currentDevice == 'touch') {
	sendCC(styleCC, 0, 'Hardtune Off');
} else {
	sendCC(activeCC, 0, 'Hardtune Off');
}
active = 0;
//show(Style, 0);
//show(Level, 0);
" trigger_script="x" trigger_type="0" trigger="3" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/OnOff/off" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="TouchHardtune" x="15" y="32" width="604" height="392" id="20" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="3">
<PARAM name="x=" value="0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,9,5,2,3,10,7,6,11,0,8,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="10.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="10,1,4,5,12,3,8,7,11,2,6,9" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'Stretched Room'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'Natural','Hard','Up','Down','Natural Male','Hard Male','Male Up','Male Down','Natural Female','Hard Female','Female Up','Female Down'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/TouchHardtune/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="
decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) return;
log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
//OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/TouchHardtune/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//log2(label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/TouchHardtune/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {
if (val == 0) return;

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/TouchHardtune/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="activeCC=" value="113" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-4452,307" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="24594,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Hardtune'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,104,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="24" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,3,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="10,'Natural',1,'Hard',4,'Up',5,'Down',12,'Natural Male',3,'Hard Male',8,'Male Up',7,'Male Down',11,'Natural Female',2,'Hard Female',6,'Female Up',9,'Female Down'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Hardtune/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(KeyScale, 'color', active ? highlightColor : gray);
setattribute(RackHardtune, 'color', active ? highlightColor : gray);

setattribute(RackHardtune.Amount, 'color', active ? highlightColor : gray);
setattribute(RackHardtune.Rate, 'color', active ? highlightColor : gray);
setattribute(RackHardtune.Window, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

setattribute(TouchHardtune, 'color', active ? highlightColor : gray);

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	log2(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} /*else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
}*/ else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive
	OnOff.x = (val > 0);

	TouchHardtune.onCC(cc, val, src);
	//Switches.onCC(cc, val, src);
}

//if (cc == styleCC)
RackHardtune.onCC(cc, val, src);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="displayName = 'Hardtune';" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="TouchHardtune.init();
onActive();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onDeviceChange()" script="decl c = Profile.currentDevice;

log2('Hardtune, Current device: ' + c);

if (c == 'touch') {
	show(RackHardtune, 0);
	show(TouchHardtune, 1);
} else {
	show(RackHardtune, 1);
	show(TouchHardtune, 0);
}


" trigger_script="Profile.currentDevice" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Hardtune/onDeviceChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Harmony" x="0" y="0" width="992" height="660" id="4" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="HarmonyHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/HarmonyHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HarmonyHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HarmonyHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/HarmonyHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Harmony">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/HarmonyHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Container" text="Harmony" x="-8" y="-8" width="983" height="668" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="561" width="104" height="60" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="on()" script="if (frame < 1) return;
sendCC(enableCC, 64, 'Harmony On');
active = 1;
//sendCC(styleCC, Style.currentValue, 'Delay On');
//sendCC(levelCC, Level.currentValue, 'Delay On');
//show(Style, x);
//show(Level, x);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/OnOff/on" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="off()" script="if (frame < 1) return;
sendCC(enableCC, 0, 'Harmony Off');
active = 0;
//show(Style, 0);
//show(Level, 0);
" trigger_script="x" trigger_type="0" trigger="3" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/OnOff/off" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="100" width="100" height="452" id="2" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('Choir level onChange: ' + currentValue);
if (z) sendCC(levelCC, currentValue, 'Harmony Level');
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

if (frame < 1) return;
//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voices" x="121" y="89" width="616" height="566" id="4" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="Voice1" x="0" y="0" width="150" height="552" id="3" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="GenderFader" x="60" y="0" width="76" height="216" id="11" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="879231" label="1" tabbar="1" meta="0">
<WINDOW class="MultiSlider" text="Fader" x="0" y="0" width="60" height="200" id="14" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" bipolar="1" capture="1" color="1596013" gradient="1" grid="0" grid_steps="1" horizontal="0" label="0" multicolor="0" nbr="1" physic="0">
<PARAM name="x=" value="0.500000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="tension=0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/tension" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="height=0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/height" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="init()" script="x=.5;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/Fader/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="WarpCenter" x="0" y="70" width="100" height="60" id="15" state="4" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

decl color = 1.0;
decl highlight = 0.5;
decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	//canvas_setFillStyle(c, selected ? highlight : color);
	//canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/WarpCenter/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="debug('Canvas hit: ' + hit);
btnPressed = 'warpCenter';
Fader.x = 0.5;
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/WarpCenter/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="showHide()" script="show(getobject(), Fader.x < 0.2 || Fader.x > 0.8);" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/WarpCenter/showHide" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="FemLabel" x="0" y="100" width="60" height="100" id="16" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Female +3">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/FemLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="MaleLabel" x="0" y="0" width="60" height="100" id="17" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Male +35">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/MaleLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="btnPressed=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/btnPressed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="showAllButtons=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/showAllButtons" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
decl val = round(Fader.x * 127);
//log('gf: ' + val);
if (val < 64) {
	show(MaleLabel, 1);
	show(FemLabel, 0);
	setattribute(MaleLabel, 'content', 'Male +' + (50 - round(Fader.x * 100)));
} else if (val > 64) {

	show(MaleLabel, 0);
	show(FemLabel, 1);
	setattribute(FemLabel, 'content', 'Female +' + (50 - round((1 - Fader.x) * 100)));

} else {
	
	show(MaleLabel, 0);
	show(FemLabel, 0);
}

decl send = 0;
if (Fader.z) {
	debug('Fader.z');
	send = 1;
}

if (btnPressed != -1) {
	debug('BUTTON: ' + btnPressed);
	send = 1;
	btnPressed = -1;
}

if (send) sendCC(genderCC, round(Fader.x * 127), 'Gender Xfader');
else debug('NOINTERACTION,NOSEND');" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="btnPressed = -1;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/GenderFader/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="8" y="208" width="120" height="280" id="12" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=x ? round(x*(127-minValue)) + minValue : 0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="active = (currentValue > 0);
OnOff.x = (currentValue > 0);
if (z) sendCC(levelCC, currentValue, displayName + ' Level');
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (src == (displayName + ' Level')) {
	debug(displayName + ': rejecting level CC because src is ' + src);
	return;
}
debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voicing" x="0" y="0" width="116" height="216" id="13" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="VoiceUp" x="0" y="0" width="60" height="100" id="4" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="28,28" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceUp/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceUp/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = min((currentValue+1), maxValue);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceUp/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="VoiceDown" x="0" y="100" width="60" height="100" id="5" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="29,29" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceDown/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceDown/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = max((currentValue-1), 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/VoiceDown/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="DisplayVal" x="0" y="70" width="60" height="60" id="7" state="245" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8159070" content="High">
<VARIABLE name="light=active ? 1 : -0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/DisplayVal/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="currentValue=" value="4.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="24598,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="maxValue=28" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/maxValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4118,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActivate()" script="decl l = active ? 1 : -0.5;
//debug('light: ' + l);
setattribute(DisplayVal, 'light', l);" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/onActivate" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onChange()" script="//debug('currentValue changed: ' + currentValue);
if (frame < 1) return;
updateLabel('onChange');
sendCC(voicingCC, currentValue, 'Voicing ' + displayName);
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="if (currentValue >= Profile.Current.numVoicings) {
	currentValue = Profile.Current.numVoicings - 1;
	log(displayName + ' currentValue is greater than numVoicings, clipping to: ' + currentValue);
}
updateLabel('init');" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateLabel(src)" script="decl l = Profile.Current.voicings[currentValue];
debug2(displayName + ' Voicing.updateLabel.s: ' + src + ' cv: ' + currentValue + ' l: ' + l);

setattribute(DisplayVal, 'content', l);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/updateLabel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];
decl l = Profile.Current.voicings[val];
//log(displayName + ' ' + val + ' ' + _src + ' ' + l);

//if (_src == 'remote') {
//	debug('REMOTE voicing');
//	decl map = {6,4,9,11,16,18,22};
	currentValue = val; //map[_val]; ///Fader.maxValue;
	
//	currentValues[voicingCC] = currentValue;
//} else {
//	debug('voicing: ' + _src);
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/Voicing/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="8" y="488" width="120" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Voice1" label_on="Voice1" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

log2('onChange: ' + x + ': ' + Level.x + ' , ' + active);
if (x) { // && Level.x == 0) {

if (active > 1) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}
	decl newValue = (lastValue > Level.minValue) ? max(lastValue, Level.minValue+1) : 127; 
	debug(displayName + ' SWITCH ON! ' + lastValue + ', ' + newValue);
	sendCC(levelCC, newValue, 'Switch On');
} else if (!x) {

if (active < 0) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}

	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(levelCC, 0, 'Switch Off');
} else {
 debug(displayName + ' TURNED ON WITH FADER?');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="voicingCC=" value="89" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=46" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="genderCC=29" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="2" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-1,-1,-1" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Voice1'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice1/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');

//setattribute(Label, 'content', name);
setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
log2(getattribute(this, 'name') + ' active? ' + active);
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active > 0 ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active > 0 ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);

OnOff.x = active > 0;
//setattribute(Level, 'value', active);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug(displayName + ' init() genderCC: ' + genderCC + ' levelCC: ' + levelCC + ' voicingCC: ' + voicingCC);
Voicing.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
decl _x = val/127;
decl name = getattribute(getobject(), 'name');
if (cc == genderCC) {
	debug(name + ' genderCC receive:' + val + ', ' + _x);
	//Gender.x = _x;
	GenderFader.Fader.x = _x;
} else if (cc == voicingCC) {
	debug(name + ' voicingCC receive:' + val);
	
	Voicing.onCC(cc, val, src);
} else if (cc == levelCC) {

	debug(name + ' levelCC receive:' + val);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice1/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voice2" x="150" y="0" width="150" height="552" id="4" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="GenderFader" x="60" y="0" width="76" height="216" id="11" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="879231" label="1" tabbar="1" meta="0">
<WINDOW class="MultiSlider" text="Fader" x="0" y="0" width="60" height="200" id="14" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" bipolar="1" capture="1" color="1596013" gradient="1" grid="0" grid_steps="1" horizontal="0" label="0" multicolor="0" nbr="1" physic="0">
<PARAM name="x=" value="0.500000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="tension=0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/tension" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="height=0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/height" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="init()" script="x=.5;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/Fader/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="WarpCenter" x="0" y="70" width="100" height="60" id="15" state="4" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

decl color = 1.0;
decl highlight = 0.5;
decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	//canvas_setFillStyle(c, selected ? highlight : color);
	//canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/WarpCenter/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="debug('Canvas hit: ' + hit);
btnPressed = 'warpCenter';
Fader.x = 0.5;
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/WarpCenter/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="showHide()" script="show(getobject(), Fader.x < 0.2 || Fader.x > 0.8);" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/WarpCenter/showHide" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="FemLabel" x="0" y="100" width="60" height="100" id="16" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Female +3">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/FemLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="MaleLabel" x="0" y="0" width="60" height="100" id="17" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Male +35">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/MaleLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="btnPressed=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/btnPressed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="showAllButtons=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/showAllButtons" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
decl val = round(Fader.x * 127);
//log('gf: ' + val);
if (val < 64) {
	show(MaleLabel, 1);
	show(FemLabel, 0);
	setattribute(MaleLabel, 'content', 'Male +' + (50 - round(Fader.x * 100)));
} else if (val > 64) {

	show(MaleLabel, 0);
	show(FemLabel, 1);
	setattribute(FemLabel, 'content', 'Female +' + (50 - round((1 - Fader.x) * 100)));

} else {
	
	show(MaleLabel, 0);
	show(FemLabel, 0);
}

decl send = 0;
if (Fader.z) {
	debug('Fader.z');
	send = 1;
}

if (btnPressed != -1) {
	debug('BUTTON: ' + btnPressed);
	send = 1;
	btnPressed = -1;
}

if (send) sendCC(genderCC, round(Fader.x * 127), 'Gender Xfader');
else debug('NOINTERACTION,NOSEND');" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="btnPressed = -1;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/GenderFader/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="8" y="208" width="120" height="280" id="12" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=x ? round(x*(127-minValue)) + minValue : 0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="active = (currentValue > 0);
OnOff.x = (currentValue > 0);
if (z) sendCC(levelCC, currentValue, displayName + ' Level');
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (src == (displayName + ' Level')) {
	debug(displayName + ': rejecting level CC because src is ' + src);
	return;
}
debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voicing" x="0" y="0" width="116" height="216" id="13" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="VoiceUp" x="0" y="0" width="60" height="100" id="4" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="28,28" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceUp/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceUp/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = min((currentValue+1), maxValue);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceUp/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="VoiceDown" x="0" y="100" width="60" height="100" id="5" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="29,29" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceDown/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceDown/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = max((currentValue-1), 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/VoiceDown/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="DisplayVal" x="0" y="70" width="60" height="60" id="7" state="245" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8159070" content="Low">
<VARIABLE name="light=active ? 1 : -0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/DisplayVal/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="currentValue=" value="3.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="24598,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="maxValue=28" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/maxValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4118,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActivate()" script="decl l = active ? 1 : -0.5;
//debug('light: ' + l);
setattribute(DisplayVal, 'light', l);" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/onActivate" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onChange()" script="//debug('currentValue changed: ' + currentValue);
if (frame < 1) return;
updateLabel('onChange');
sendCC(voicingCC, currentValue, 'Voicing ' + displayName);
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="if (currentValue >= Profile.Current.numVoicings) {
	currentValue = Profile.Current.numVoicings - 1;
	log(displayName + ' currentValue is greater than numVoicings, clipping to: ' + currentValue);
}
updateLabel('init');" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateLabel(src)" script="decl l = Profile.Current.voicings[currentValue];
debug2(displayName + ' Voicing.updateLabel.s: ' + src + ' cv: ' + currentValue + ' l: ' + l);

setattribute(DisplayVal, 'content', l);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/updateLabel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];
decl l = Profile.Current.voicings[val];
//log(displayName + ' ' + val + ' ' + _src + ' ' + l);

//if (_src == 'remote') {
//	debug('REMOTE voicing');
//	decl map = {6,4,9,11,16,18,22};
	currentValue = val; //map[_val]; ///Fader.maxValue;
	
//	currentValues[voicingCC] = currentValue;
//} else {
//	debug('voicing: ' + _src);
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/Voicing/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="8" y="488" width="120" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Voice2" label_on="Voice2" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

log2('onChange: ' + x + ': ' + Level.x + ' , ' + active);
if (x) { // && Level.x == 0) {

if (active > 1) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}
	decl newValue = (lastValue > Level.minValue) ? max(lastValue, Level.minValue+1) : 127; 
	debug(displayName + ' SWITCH ON! ' + lastValue + ', ' + newValue);
	sendCC(levelCC, newValue, 'Switch On');
} else if (!x) {

if (active < 0) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}

	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(levelCC, 0, 'Switch Off');
} else {
 debug(displayName + ' TURNED ON WITH FADER?');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="voicingCC=" value="61" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=46" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="genderCC=29" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="2" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-1,-1,-1" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Voice2'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice2/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');

//setattribute(Label, 'content', name);
setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
log2(getattribute(this, 'name') + ' active? ' + active);
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active > 0 ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active > 0 ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);

OnOff.x = active > 0;
//setattribute(Level, 'value', active);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug(displayName + ' init() genderCC: ' + genderCC + ' levelCC: ' + levelCC + ' voicingCC: ' + voicingCC);
Voicing.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
decl _x = val/127;
decl name = getattribute(getobject(), 'name');
if (cc == genderCC) {
	debug(name + ' genderCC receive:' + val + ', ' + _x);
	//Gender.x = _x;
	GenderFader.Fader.x = _x;
} else if (cc == voicingCC) {
	debug(name + ' voicingCC receive:' + val);
	
	Voicing.onCC(cc, val, src);
} else if (cc == levelCC) {

	debug(name + ' levelCC receive:' + val);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice2/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voice3" x="300" y="0" width="150" height="552" id="5" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="GenderFader" x="60" y="0" width="76" height="216" id="11" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="879231" label="1" tabbar="1" meta="0">
<WINDOW class="MultiSlider" text="Fader" x="0" y="0" width="60" height="200" id="14" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" bipolar="1" capture="1" color="1596013" gradient="1" grid="0" grid_steps="1" horizontal="0" label="0" multicolor="0" nbr="1" physic="0">
<PARAM name="x=" value="0.500000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="tension=0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/tension" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="height=0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/height" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="init()" script="x=.5;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/Fader/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="WarpCenter" x="0" y="70" width="100" height="60" id="15" state="4" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

decl color = 1.0;
decl highlight = 0.5;
decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	//canvas_setFillStyle(c, selected ? highlight : color);
	//canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/WarpCenter/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="debug('Canvas hit: ' + hit);
btnPressed = 'warpCenter';
Fader.x = 0.5;
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/WarpCenter/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="showHide()" script="show(getobject(), Fader.x < 0.2 || Fader.x > 0.8);" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/WarpCenter/showHide" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="FemLabel" x="0" y="100" width="60" height="100" id="16" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Female +3">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/FemLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="MaleLabel" x="0" y="0" width="60" height="100" id="17" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Male +35">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/MaleLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="btnPressed=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/btnPressed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="showAllButtons=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/showAllButtons" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
decl val = round(Fader.x * 127);
//log('gf: ' + val);
if (val < 64) {
	show(MaleLabel, 1);
	show(FemLabel, 0);
	setattribute(MaleLabel, 'content', 'Male +' + (50 - round(Fader.x * 100)));
} else if (val > 64) {

	show(MaleLabel, 0);
	show(FemLabel, 1);
	setattribute(FemLabel, 'content', 'Female +' + (50 - round((1 - Fader.x) * 100)));

} else {
	
	show(MaleLabel, 0);
	show(FemLabel, 0);
}

decl send = 0;
if (Fader.z) {
	debug('Fader.z');
	send = 1;
}

if (btnPressed != -1) {
	debug('BUTTON: ' + btnPressed);
	send = 1;
	btnPressed = -1;
}

if (send) sendCC(genderCC, round(Fader.x * 127), 'Gender Xfader');
else debug('NOINTERACTION,NOSEND');" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="btnPressed = -1;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/GenderFader/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="8" y="208" width="120" height="280" id="12" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=x ? round(x*(127-minValue)) + minValue : 0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="active = (currentValue > 0);
OnOff.x = (currentValue > 0);
if (z) sendCC(levelCC, currentValue, displayName + ' Level');
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (src == (displayName + ' Level')) {
	debug(displayName + ': rejecting level CC because src is ' + src);
	return;
}
debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voicing" x="0" y="0" width="116" height="216" id="13" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="VoiceUp" x="0" y="0" width="60" height="100" id="4" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="28,28" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceUp/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceUp/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = min((currentValue+1), maxValue);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceUp/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="VoiceDown" x="0" y="100" width="60" height="100" id="5" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="29,29" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceDown/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceDown/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = max((currentValue-1), 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/VoiceDown/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="DisplayVal" x="0" y="70" width="60" height="60" id="7" state="245" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8159070" content="Higher">
<VARIABLE name="light=active ? 1 : -0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/DisplayVal/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="currentValue=" value="5.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="24598,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="maxValue=28" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/maxValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4118,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActivate()" script="decl l = active ? 1 : -0.5;
//debug('light: ' + l);
setattribute(DisplayVal, 'light', l);" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/onActivate" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onChange()" script="//debug('currentValue changed: ' + currentValue);
if (frame < 1) return;
updateLabel('onChange');
sendCC(voicingCC, currentValue, 'Voicing ' + displayName);
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="if (currentValue >= Profile.Current.numVoicings) {
	currentValue = Profile.Current.numVoicings - 1;
	log(displayName + ' currentValue is greater than numVoicings, clipping to: ' + currentValue);
}
updateLabel('init');" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateLabel(src)" script="decl l = Profile.Current.voicings[currentValue];
debug2(displayName + ' Voicing.updateLabel.s: ' + src + ' cv: ' + currentValue + ' l: ' + l);

setattribute(DisplayVal, 'content', l);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/updateLabel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];
decl l = Profile.Current.voicings[val];
//log(displayName + ' ' + val + ' ' + _src + ' ' + l);

//if (_src == 'remote') {
//	debug('REMOTE voicing');
//	decl map = {6,4,9,11,16,18,22};
	currentValue = val; //map[_val]; ///Fader.maxValue;
	
//	currentValues[voicingCC] = currentValue;
//} else {
//	debug('voicing: ' + _src);
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/Voicing/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="8" y="488" width="120" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Voice3" label_on="Voice3" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

log2('onChange: ' + x + ': ' + Level.x + ' , ' + active);
if (x) { // && Level.x == 0) {

if (active > 1) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}
	decl newValue = (lastValue > Level.minValue) ? max(lastValue, Level.minValue+1) : 127; 
	debug(displayName + ' SWITCH ON! ' + lastValue + ', ' + newValue);
	sendCC(levelCC, newValue, 'Switch On');
} else if (!x) {

if (active < 0) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}

	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(levelCC, 0, 'Switch Off');
} else {
 debug(displayName + ' TURNED ON WITH FADER?');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="voicingCC=" value="88" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=46" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="genderCC=29" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-1,-1,-1" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Voice3'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice3/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');

//setattribute(Label, 'content', name);
setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
log2(getattribute(this, 'name') + ' active? ' + active);
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active > 0 ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active > 0 ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);

OnOff.x = active > 0;
//setattribute(Level, 'value', active);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug(displayName + ' init() genderCC: ' + genderCC + ' levelCC: ' + levelCC + ' voicingCC: ' + voicingCC);
Voicing.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
decl _x = val/127;
decl name = getattribute(getobject(), 'name');
if (cc == genderCC) {
	debug(name + ' genderCC receive:' + val + ', ' + _x);
	//Gender.x = _x;
	GenderFader.Fader.x = _x;
} else if (cc == voicingCC) {
	debug(name + ' voicingCC receive:' + val);
	
	Voicing.onCC(cc, val, src);
} else if (cc == levelCC) {

	debug(name + ' levelCC receive:' + val);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice3/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voice4" x="450" y="0" width="150" height="552" id="6" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="GenderFader" x="60" y="0" width="76" height="216" id="11" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="879231" label="1" tabbar="1" meta="0">
<WINDOW class="MultiSlider" text="Fader" x="0" y="0" width="60" height="200" id="14" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" bipolar="1" capture="1" color="1596013" gradient="1" grid="0" grid_steps="1" horizontal="0" label="0" multicolor="0" nbr="1" physic="0">
<PARAM name="x=" value="0.500000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="tension=0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/tension" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="height=0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/height" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="init()" script="x=.5;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/Fader/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="WarpCenter" x="0" y="70" width="100" height="60" id="15" state="4" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

decl color = 1.0;
decl highlight = 0.5;
decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	//canvas_setFillStyle(c, selected ? highlight : color);
	//canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/WarpCenter/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="debug('Canvas hit: ' + hit);
btnPressed = 'warpCenter';
Fader.x = 0.5;
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/WarpCenter/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="showHide()" script="show(getobject(), Fader.x < 0.2 || Fader.x > 0.8);" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/WarpCenter/showHide" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="FemLabel" x="0" y="100" width="60" height="100" id="16" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Female +3">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/FemLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="MaleLabel" x="0" y="0" width="60" height="100" id="17" state="244" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Male +35">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/MaleLabel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="btnPressed=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/btnPressed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="showAllButtons=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/showAllButtons" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
decl val = round(Fader.x * 127);
//log('gf: ' + val);
if (val < 64) {
	show(MaleLabel, 1);
	show(FemLabel, 0);
	setattribute(MaleLabel, 'content', 'Male +' + (50 - round(Fader.x * 100)));
} else if (val > 64) {

	show(MaleLabel, 0);
	show(FemLabel, 1);
	setattribute(FemLabel, 'content', 'Female +' + (50 - round((1 - Fader.x) * 100)));

} else {
	
	show(MaleLabel, 0);
	show(FemLabel, 0);
}

decl send = 0;
if (Fader.z) {
	debug('Fader.z');
	send = 1;
}

if (btnPressed != -1) {
	debug('BUTTON: ' + btnPressed);
	send = 1;
	btnPressed = -1;
}

if (send) sendCC(genderCC, round(Fader.x * 127), 'Gender Xfader');
else debug('NOINTERACTION,NOSEND');" trigger_script="Fader.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="btnPressed = -1;" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/GenderFader/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="8" y="208" width="120" height="280" id="12" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=x ? round(x*(127-minValue)) + minValue : 0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="active = (currentValue > 0);
OnOff.x = (currentValue > 0);
if (z) sendCC(levelCC, currentValue, displayName + ' Level');
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (src == (displayName + ' Level')) {
	debug(displayName + ': rejecting level CC because src is ' + src);
	return;
}
debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Voicing" x="0" y="0" width="116" height="216" id="13" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="VoiceUp" x="0" y="0" width="60" height="100" id="4" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="28,28" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceUp/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceUp/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = min((currentValue+1), maxValue);
" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceUp/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="VoiceDown" x="0" y="100" width="60" height="100" id="5" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="29,29" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceDown/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceDown/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="currentValue = max((currentValue-1), 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/VoiceDown/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="DisplayVal" x="0" y="70" width="60" height="60" id="7" state="245" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8159070" content="Lower">
<VARIABLE name="light=active ? 1 : -0.5" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/DisplayVal/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="currentValue=" value="2.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="24598,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="maxValue=28" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/maxValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4118,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActivate()" script="decl l = active ? 1 : -0.5;
//debug('light: ' + l);
setattribute(DisplayVal, 'light', l);" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/onActivate" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onChange()" script="//debug('currentValue changed: ' + currentValue);
if (frame < 1) return;
updateLabel('onChange');
sendCC(voicingCC, currentValue, 'Voicing ' + displayName);
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="if (currentValue >= Profile.Current.numVoicings) {
	currentValue = Profile.Current.numVoicings - 1;
	log(displayName + ' currentValue is greater than numVoicings, clipping to: ' + currentValue);
}
updateLabel('init');" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateLabel(src)" script="decl l = Profile.Current.voicings[currentValue];
debug2(displayName + ' Voicing.updateLabel.s: ' + src + ' cv: ' + currentValue + ' l: ' + l);

setattribute(DisplayVal, 'content', l);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/updateLabel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];
decl l = Profile.Current.voicings[val];
//log(displayName + ' ' + val + ' ' + _src + ' ' + l);

//if (_src == 'remote') {
//	debug('REMOTE voicing');
//	decl map = {6,4,9,11,16,18,22};
	currentValue = val; //map[_val]; ///Fader.maxValue;
	
//	currentValues[voicingCC] = currentValue;
//} else {
//	debug('voicing: ' + _src);
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/Voicing/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="OnOff" x="8" y="488" width="120" height="52" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Voice4" label_on="Voice4" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

log2('onChange: ' + x + ': ' + Level.x + ' , ' + active);
if (x) { // && Level.x == 0) {

if (active > 1) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}
	decl newValue = (lastValue > Level.minValue) ? max(lastValue, Level.minValue+1) : 127; 
	debug(displayName + ' SWITCH ON! ' + lastValue + ', ' + newValue);
	sendCC(levelCC, newValue, 'Switch On');
} else if (!x) {

if (active < 0) {
	log2(displayName + ' NOT sendingCC.  active: ' + active + ' x: ' + x);

	return;
}

	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(levelCC, 0, 'Switch Off');
} else {
 debug(displayName + ' TURNED ON WITH FADER?');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="voicingCC=" value="3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=46" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="genderCC=29" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-1,-1,-1" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Voice4'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/Voice4/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');

//setattribute(Label, 'content', name);
setattribute(OnOff, 'label_off', displayName); // + ': Off');
setattribute(OnOff, 'label_on', displayName); // + ': On');" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
log2(getattribute(this, 'name') + ' active? ' + active);
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active > 0 ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active > 0 ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);

OnOff.x = active > 0;
//setattribute(Level, 'value', active);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug(displayName + ' init() genderCC: ' + genderCC + ' levelCC: ' + levelCC + ' voicingCC: ' + voicingCC);
Voicing.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
decl _x = val/127;
decl name = getattribute(getobject(), 'name');
if (cc == genderCC) {
	debug(name + ' genderCC receive:' + val + ', ' + _x);
	//Gender.x = _x;
	GenderFader.Fader.x = _x;
} else if (cc == voicingCC) {
	debug(name + ' voicingCC receive:' + val);
	
	Voicing.onCC(cc, val, src);
} else if (cc == levelCC) {

	debug(name + ' levelCC receive:' + val);
	Level.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/Voice4/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="voices=" value="Voice1,Voice2,Voice3,Voice4" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Voices/voices" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12288,26740,20512" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="voices = {
	Voice1,
	Voice2,
	Voice3,
	Voice4
};

decl vw;
decl v1r = getattribute(Voice1, 'rect');
vw = v1r[2];
//debug('Voice1 width: ' + vw);
decl v2r = getattribute(Voice2, 'rect');
v2r[0] = vw;
setattribute(Voice2, 'rect', v2r);
decl v3r = getattribute(Voice3, 'rect');
v3r[0] = vw*2;
setattribute(Voice3, 'rect', v3r);
decl v4r = getattribute(Voice4, 'rect');
v4r[0] = vw*3;
setattribute(Voice4, 'rect', v4r);" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onDeviceChange()" script="decl c = Profile.currentDevice;

debug('Voices: onDeviceChanged: ' + c);

// Voice 1
Voice1.genderCC = getProfile('voice_1_genderCC');
Voice1.levelCC = getProfile('voice_1_levelCC');
Voice1.voicingCC = getProfile('voice_1_voicingCC');

// Voice 2
Voice2.genderCC = getProfile('voice_2_genderCC');
Voice2.levelCC = getProfile('voice_2_levelCC');
Voice2.voicingCC = getProfile('voice_2_voicingCC');

// Voice 3
Voice3.genderCC = getProfile('voice_3_genderCC');
Voice3.levelCC = getProfile('voice_3_levelCC');
Voice3.voicingCC = getProfile('voice_3_voicingCC');

// Voice 4
Voice4.genderCC = getProfile('voice_4_genderCC');
Voice4.levelCC = getProfile('voice_4_levelCC');
Voice4.voicingCC = getProfile('voice_4_voicingCC');


//Harmony.harmonyStyles = getProfile('harmonyStyles');

//log('Harmony.choirCC: ' + Harmony.choirCC);


" trigger_script="Profile.currentDevice" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/onDeviceChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onStyleChange()" script="if (frame < 1) {
	//log2('onStyleChange TOO EARLY: ' + frame);
	return;
}

decl onVal = 2;
decl e = stretch(onVal, 4);
decl offVal = -1;
if (currentStyle < 9) { // 3 voices or less
	debug2('3 voices or less ' + frame + ' ' + initFrame);
	e = replace(e, offVal, 3);
}

if (currentStyle < 6) { // 2 voices or less
	debug2('2 voices or less');
	e = replace(e, offVal, 2);
}

if (currentStyle < 2) { // 1 voice
	debug2('1 voice');
	e = replace(e, offVal, 1);
}

decl i = 0; 
for (i = 0; i < 4; i++) {
	debug2('Setting voice' + (i+1) + ' active: ' + e[1]);
	if (e[i] == offVal) {
		setexpression(voices[i], 'lastValue', -1);
	}
	setexpression(voices[i], 'active', e[i]);
}
//Switches1.displayName = 'S1';
//Switches1.startIndex = 0;
//Switches1.endIndex = 1;

//Switches2.displayName = 'S2';
//Switches2.startIndex = 2;
//Switches2.endIndex = 5;

//Switches3.displayName = 'S3';
//Switches3.startIndex = 6;
//Switches3.endIndex = 8;

//Switches4.displayName = 'S4';
//Switches4.startIndex = 9;
//Switches4.endIndex = 14;" trigger_script="currentStyle" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/onStyleChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="Voice1.init();
Voice2.init();
Voice3.init();
Voice4.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
Voice1.onCC(cc, val, src);
Voice2.onCC(cc, val, src);
Voice3.onCC(cc, val, src);
Voice4.onCC(cc, val, src);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Voices/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="LemurMenu" text="StyleMenu" x="284" y="33" width="376" height="36" id="5" state="209" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" scale="0" content="Option 1,Option 2">
<PARAM name="selection=" value="3.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StyleMenu/selection" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'  1 Above (High)','  1 Below (Low)','  2 Low+High','  2 Above (High+Higher)','  2 Below (Lower+Low)','  2 (Higher+Lower)','  3 (Low+High+Higher)','  3 (Lower+Low+High)','  3 (Lower+High+Higher)','  3 (Lower+Low+High+Higher)','  4 Gospel High (Low+High+Higher)','  4 Gospel Low (Lower+Low+High)','  4 Upper Choir (High+Higher)','  4 Lower Choir (Low+Lower)','  4 Bass Boys (Low+Lower)'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StyleMenu/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="678,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + currentValue);
OnOff.x = 1;
//setStyle(currentValue);
changeStyle(codes[selection], getattribute(getobject(), 'name'));
" trigger_script="selection" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StyleMenu/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

if (src == 'remote') {
//decl _x = stretch(0, sizeof(pads));
//_x = replace(_x, 1, pads[_val]);
selection = pads[val];
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StyleMenu/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Choir" x="751" y="100" width="216" height="156" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Fader" text="Fader" x="30" y="45" width="100" height="424" id="7" state="0" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="1" physic="1" precision="0" unit="%" value="1" zoom="1.000000">
<PARAM name="x=" value="0.496063" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x*100" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Fader/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (z) sendCC(choirLevelCC, round(x*127), 'Choir Level');
" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Choir/Fader/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (!z) x = val / 127;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Choir/Fader/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="74" y="0" width="130" height="48" id="8" state="245" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Choir Level">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Knob" text="Knob" x="0" y="0" width="120" height="135" id="9" state="5" group="0" font="tahoma,10,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="865343,1596013" cursor="0" grid="0" grid_steps="1" label="0" mode="1" physic="0" precision="0" type="0" unit="%" value="1">
<PARAM name="x=" value="0.496063" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=x*100" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Choir/Knob/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (z) sendCC(choirLevelCC, round(x*127), 'Choir Level');
" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Choir/Knob/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
//decl _src = received[1];
//decl _x = (_val > minValue) ? (_val - minValue)/(127 - minValue) : 0;
//debug('1 levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = val / 127;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Choir/Knob/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
Fader.onCC(cc, val, src);
Knob.onCC(cc, val, src);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/Choir/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="StylesGrid" x="751" y="256" width="216" height="396" id="12" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="1">
<WINDOW class="Tab" text="1" x="0" y="0" width="200" height="348" id="2" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Canvas" text="OneAbove" x="0" y="0" width="200" height="50" id="17" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, x);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneAbove/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="OneBelow" x="0" y="50" width="200" height="50" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/OneBelow/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="2" x="0" y="0" width="200" height="348" id="1" state="1" group="0" font="tahoma,11,0" >
<WINDOW class="Canvas" text="Two2Abov" x="0" y="0" width="200" height="50" id="20" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Abov/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="Two2Below" x="0" y="100" width="200" height="50" id="21" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="4" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two2Below/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="Two1Above1Below" x="0" y="50" width="200" height="50" id="22" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="2" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Two1Above1Below/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="TwoFarAboveBelow" x="0" y="150" width="200" height="50" id="23" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="5" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/TwoFarAboveBelow/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="3" x="0" y="0" width="200" height="348" id="3" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Canvas" text="Three1Above2Below" x="0" y="0" width="200" height="50" id="23" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="7" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three1Above2Below/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="Three2Above1Below" x="0" y="50" width="200" height="50" id="24" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="6" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2Above1Below/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="Three2AboveFarBelow" x="0" y="100" width="200" height="50" id="25" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="8" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Three2AboveFarBelow/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="4" x="0" y="0" width="200" height="348" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Canvas" text="Four2Above2Below" x="0" y="50" width="200" height="50" id="25" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="9" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/Four2Above2Below/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="FourGospelHigh" x="0" y="100" width="200" height="50" id="26" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=currentStyle == 10" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="10" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelHigh/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="FourGospelLow" x="0" y="150" width="200" height="50" id="27" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="11" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourGospelLow/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="FourUpperChoir" x="0" y="0" width="200" height="50" id="28" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="12" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourUpperChoir/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="FourLowerChoir" x="0" y="250" width="200" height="50" id="29" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="13" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourLowerChoir/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="FourBassBoys" x="0" y="200" width="200" height="50" id="30" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="1" touchSupport="1">
<VARIABLE name="octaveDown=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/octaveDown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24553,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bass=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/bass" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8167,29300,28257" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lower=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/lower" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="17184,24936,25197" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="low=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/low" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="high=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/high" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12314,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="higher=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/higher" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,25964,29224" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="octaveUp=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/octaveUp" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24558,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16404,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleNum=" value="14" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/styleNum" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="draw()" script="debug(getattribute(getobject(), 'name') + ' draw()');
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
//w = width;
h = height;
radius = 1;

decl steps = {
	'octaveDown',
	'bass',
	'lower',
	'low',
	'high',
	'higher',
	'octaveUp'
};

decl num = sizeof(steps);
w = width/num;
decl color;
for (i = 0; i < num; i++) {
	color = active ? {0,1,0} : bgColor;
	if (!getexpression(c, steps[i])) color = 0;
	drawSingle(x, y, w, h, color);
	
	x += w;
}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="drawSingle(x,y,w,h,color)" script="
decl c = getobject();
decl i,radius;

radius = 1;
//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, 1);
	canvas_closePath(c);
	canvas_setFillStyle(c, color);
	canvas_setStrokeStyle(c, {.4,.4,.4});
	canvas_fill(c);
	canvas_stroke(c);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/drawSingle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="//selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();

log('touch: ' + styleNum + ' (' + x + ')');
changeStyle(styleNum, getattribute(getobject(), 'name'));
" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/FourBassBoys/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<VARIABLE name="styles=" value="OneAbove,OneBelow,Two1Above1Below,Two2Abov,Two2Below,TwoFarAboveBelow,Three2Above1Below,Three1Above2Below,Three2AboveFarBelow,Four2Above2Below,FourGospelHigh,FourGospelLow,FourUpperChoir,FourLowerChoir,FourBassBoys" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/StylesGrid/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12288,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="styles = {
	OneAbove,
	OneBelow,
	Two1Above1Below,
	Two2Abov,
	Two2Below,
	TwoFarAboveBelow,
	Three2Above1Below,
	Three1Above2Below,
	Three2AboveFarBelow,
	Four2Above2Below,
	FourGospelHigh,
	FourGospelLow,
	FourUpperChoir,
	FourLowerChoir,
	FourBassBoys
};

decl i = 0, c, num = sizeof(styles);
for (i = 0; i < num; i++) {
	c = styles[i];
	setexpression(c, 'styleNum', i);
	//canvas_refresh(c);
}

//Switches1.displayName = 'S1';
//Switches1.startIndex = 0;
//Switches1.endIndex = 1;

//Switches2.displayName = 'S2';
//Switches2.startIndex = 2;
//Switches2.endIndex = 5;

//Switches3.displayName = 'S3';
//Switches3.startIndex = 6;
//Switches3.endIndex = 8;

//Switches4.displayName = 'S4';
//Switches4.startIndex = 9;
//Switches4.endIndex = 14;

" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];
if (frame < 1) return;
decl this = getobject();
if (val < 2) {
	selecttab(this, 0);
} else if (val < 6) {
	selecttab(this, 1);
} else if (val < 9) {
	selecttab(this, 2);
} else {
	selecttab(this, 3);
}

decl obj, i = 0, num = sizeof(styles);
for (i = 0; i < num; i++) {
	obj = styles[i];
	if (obj) {
	//log('Setting style' + (i+1) + ' active: '+ (i == currentStyle));
		setexpression(obj, 'active', (i == currentStyle));
		canvas_refresh(obj);
	} else log('onStyleChange, No object: ' + i);
}

//sendCC(styleCC, currentStyle, 'StylesGrid');
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl i = 0, c, num = sizeof(styles);
for (i = 0; i < num; i++) {
	c = styles[i];
	//setexpression(c, 'styleNum', i);
	canvas_refresh(c);
}
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/StylesGrid/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="LemurMenu" text="ChoirMenu" x="751" y="33" width="200" height="36" id="13" state="241" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" scale="0" content="Option 1,Option 2">
<PARAM name="selection=" value="2.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/ChoirMenu/selection" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/ChoirMenu/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/ChoirMenu/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=codes[selection]" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/ChoirMenu/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//debug('onChange: ' + currentValue);
if (frame < 1) return;

OnOff.x = 1;
sendCC(choirCC, currentValue, 'Choir Menu Change');


" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/ChoirMenu/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

decl labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

decl styles = choirStyles;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(this,'items',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/ChoirMenu/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

if (frame < 1) return;

//decl _val = received[1];
//decl _src = received[2];

if (src == 'remote') {
//decl _x = stretch(0, sizeof(pads));
//_x = replace(_x, 1, pads[_val]);
selection = pads[val];
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/ChoirMenu/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="714" y="-4" width="130" height="48" id="14" state="245" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Choir Style">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Text2" x="263" y="-4" width="130" height="48" id="15" state="245" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Harmony Style">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/Text2/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="styleCC=56" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="enableCC=110" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/enableCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8192,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="levelCC=12" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyStyles=" value="0,'1 Above (High)',1,'1 Below (Low)',2,'2 Low+High',3,'2 Above (High+Higher)',4,'2 Below (Lower+Low)',5,'2 (Higher+Lower)',6,'3 (Low+High+Higher)',7,'3 (Lower+Low+High)',8,'3 (Lower+High+Higher)',9,'3 (Lower+Low+High+Higher)',10,'4 Gospel High (Low+High+Higher)',11,'4 Gospel Low (Lower+Low+High)',12,'4 Upper Choir (High+Higher)',13,'4 Lower Choir (Low+Lower)',14,'4 Bass Boys (Low+Lower)'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/harmonyStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirStyles=" value="0,'Small 1',1,'Small 2',2,'Medium 1',3,'Medium 2',4,'Medium 3',5,'Large',6,'Loose',7,'European',8,'American',9,'Tight',10,'Pitchy',11,'Vibrate',12,'Shake',13,'Speaking',14,'Chaos'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/choirStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8242,25153" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirCC=" value="73" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/choirCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirLevelCC=" value="72" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/choirLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29888,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,3,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Harmony'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16403,0,-256" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentStyle=" value="3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Harmony/currentStyle" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onDeviceChange()" script="decl c = Profile.currentDevice;

debug('Harmony: onDeviceChanged: ' + c);

// Harmony
harmonyStyles = getProfile('harmonyStyles');
choirStyles = getProfile('choirStyles');
enableCC = getProfile('harmonyCC');
levelCC = getProfile('harmonyLevelCC');
styleCC = getProfile('harmonyStyleCC');
choirCC = getProfile('choirStyleCC');
choirLevelCC = getProfile('choirLevelCC');
" trigger_script="Profile.currentDevice" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/onDeviceChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug('Harmony: init.  currentStyle: ' + currentStyle);
show(Choir.Fader, 0);
decl this, red, green, blue, grey;

this = getobject();
displayName = getattribute(this, 'name');

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

decl labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

decl styles = harmonyStyles;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = '  ' + styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(StyleMenu,'items',labels);
//setattribute(StyleMenu, 'labels', labels);
setexpression(StyleMenu, 'labels', labels);
//StylesGrid.setLabels(labels);
//setattribute(this,'colors',colors);

ChoirMenu.init();

Voices.init();

StylesGrid.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl _cc = received[0];
//decl _val = received[1];
if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	Level.onCC(cc, val, src);
} else if (cc == enableCC) {
	debug('Harmony enableCC receive:' + val);
	OnOff.x = round(val/64);
} else if (cc == styleCC) {
	debug('Harmony styleCC receive:' + val);

	currentStyle = val;
	//Style.onReceive();
	StyleMenu.onCC(cc, val, src);
	StylesGrid.onCC(cc, val, src);
} else if (cc == choirCC) {
	log('Harmony choirCC: ' + val);
	ChoirMenu.onCC(cc, val, src);
} else if (cc == choirLevelCC) {
	log('Harmony choirLevelCC: ' + val);
	Choir.onCC(cc, val, src);
}

Voices.onCC(cc, val, src);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="changeStyle(num, src)" script="if (num == currentStyle) {
	log2('Harmony style is unchanged at ' + num + ' (from ' + src);
	return;
}

currentStyle = num;
if (currentStyle >= 0) {
log(displayName + ':' + src + ' style changed, sending: ' + currentStyle);
sendCC(styleCC, currentStyle, src);
} else {
	log2(displayName + ':' + src + ': invlaid current style');
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Harmony/changeStyle" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Reverb" x="0" y="0" width="992" height="660" id="10" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Reverb" x="0" y="100" width="992" height="560" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="434" width="120" height="100" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="0" width="120" height="430" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.021277" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0);
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Switches" x="129" y="16" width="847" height="480" id="17" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="8">
<PARAM name="x=" value="1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'Smooth Plate'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'Smooth Plate','Soft Hall','Amsterdam Hall','Broadway Hall','Snappy Room','Library','Dark Room','Music Club','Studio Live Room','Stretched Room','Warehouse','Bouncy Room','Real Plate','Reflection Plate','Thin Plate','Bright Chamber','Bright Plate','Real Plate Short','Real Plate Long','Wooden Chamber','Jazz Plate','Quick Plate','St. Joseph Church','Hockey Arena','Dome Chapel','Museum','Indoor Arena','Cozy Corner','Thin Spring','Full Spring'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/Switches/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="
decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) return;
log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/Switches/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/Switches/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="91" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="52" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Reverb'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="1,'Smooth Plate',2,'Soft Hall',3,'Amsterdam Hall',4,'Broadway Hall',5,'Snappy Room',6,'Library',7,'Dark Room',8,'Music Club',9,'Studio Live Room',10,'Stretched Room',11,'Warehouse',12,'Bouncy Room',13,'Real Plate',14,'Reflection Plate',15,'Thin Plate',16,'Bright Chamber',17,'Bright Plate',18,'Real Plate Short',19,'Real Plate Long',20,'Wooden Chamber',21,'Jazz Plate',22,'Quick Plate',23,'St. Joseph Church',24,'Hockey Arena',25,'Dome Chapel',26,'Museum',27,'Indoor Arena',28,'Cozy Corner',29,'Thin Spring',30,'Full Spring'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="112" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Reverb/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug('Reverb: init');
Switches.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	Switches.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Reverb/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="ReverbHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/ReverbHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/ReverbHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/ReverbHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/ReverbHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Reverb">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/ReverbHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Delay" x="0" y="0" width="992" height="660" id="8" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Delay" x="0" y="100" width="992" height="560" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="434" width="120" height="100" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,0" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="96.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
//	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="0" width="120" height="430" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.340426" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0);
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');

OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);


//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Switches" x="129" y="0" width="847" height="300" id="17" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="5">
<PARAM name="x=" value="1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'No Style'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'No Style','Quarter','Eighth','Triplet','Dotted','Long Dot','Long Trip','Sixteenth','Ping Pong 1','Ping Pong 2','Ping Pong 3','Multitap 1','Multitap 2','Multitap 3','Multitap 4','Multitap 5','Multitap 6','Classic Slap','Single Slap'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/Switches/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) return;

log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/Switches/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/Switches/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="62" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="51" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Delay'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'No Style',1,'Quarter',2,'Eighth',3,'Triplet',4,'Dotted',5,'Long Dot',6,'Long Trip',7,'Sixteenth',8,'Ping Pong 1',9,'Ping Pong 2',10,'Ping Pong 3',11,'Multitap 1',12,'Multitap 2',13,'Multitap 3',14,'Multitap 4',15,'Multitap 5',16,'Multitap 6',17,'Classic Slap',18,'Single Slap'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="117" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Delay/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug2('Delay: init');
Switches.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;

//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	Switches.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Delay/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="DelayHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DelayHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DelayHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DelayHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/DelayHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Delay">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DelayHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Double" x="0" y="0" width="992" height="660" id="9" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Double" x="0" y="100" width="992" height="560" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="4144959" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="434" width="120" height="100" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,0" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="116.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="0" width="120" height="430" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="4144959" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.765957" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0);
if (z) {
	sendCC(levelCC, currentValue, displayName + ' Level');
	OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Switches" x="129" y="16" width="847" height="120" id="17" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="3" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="2">
<PARAM name="x=" value="0.000000,0.000000,1.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,2,3,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="2.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="0,1,2,3,4,5" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'2 Voices Wide'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'1 Voice Tight','1 Voice Loose','2 Voices Wide','4 Voices Tight','4 Voices Wide','4 Voices Mono'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/Switches/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) return;
log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/Switches/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/Switches/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="15" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="53" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Double'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'1 Voice Tight',1,'1 Voice Loose',2,'2 Voices Wide',3,'4 Voices Tight',4,'4 Voices Wide',5,'4 Voices Mono'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="111" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Double/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debug2('Double: init');
Switches.init();
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	Switches.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Double/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="DoubleHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DoubleHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DoubleHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DoubleHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/DoubleHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Double">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DoubleHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Mod" x="0" y="0" width="992" height="660" id="12" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="uMod" x="0" y="100" width="992" height="560" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="0" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="434" width="120" height="100" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,0" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="94.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;

//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="0" width="120" height="430" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="0" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.297872" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-60 + (currentValue/127)*60" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=80" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0);

if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Switches" x="129" y="16" width="847" height="360" id="17" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="6">
<PARAM name="x=" value="0.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="2.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'Micromod Wider'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'Micromod Clone','Micromod Wider','Thicken','Light Chorus','Medium Chorus','Wide Chorus','Mono Chorus','Fast Rotor','Flanger','Flange Feedback','Flange Negative','Mono Flange','Soft Flange','Panner','Tube','Up Tube','Down Tube','Down & Up Tube','Rise and Fall','Ottowa Wide','Cylon Mono','Cylon Stereo','Alien Voiceover','Underwater'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/Switches/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) {
//log2('uMOD switches TOO EARLY');
return;
}
log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/Switches/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
if (frame < 1) return;
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/Switches/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="50" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'uMod'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="1,'Micromod Clone',2,'Micromod Wider',3,'Thicken',4,'Light Chorus',5,'Medium Chorus',6,'Wide Chorus',7,'Mono Chorus',8,'Fast Rotor',9,'Flanger',10,'Flange Feedback',11,'Flange Negative',12,'Mono Flange',13,'Soft Flange',14,'Panner',15,'Tube',16,'Up Tube',17,'Down Tube',18,'Down & Up Tube',19,'Rise and Fall',20,'Ottowa Wide',21,'Cylon Mono',22,'Cylon Stereo',23,'Alien Voiceover',24,'Underwater'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="116" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uMod/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="debugi('umod init');
Switches.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="if (frame < 1) return;

//log2('uMod onReceive');
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	Switches.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uMod/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="uModHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/uModHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uModHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uModHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/uModHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Mod">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/uModHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Transducer" x="0" y="0" width="992" height="660" id="11" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="Transducer" x="0" y="100" width="992" height="560" id="6" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="CustomButton" text="OnOff" x="0" y="434" width="120" height="100" id="14" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="4144959,1596013" label_off="Off" label_on="On" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/OnOff/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 1 : 0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/OnOff/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="lastValue=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/OnOff/lastValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28708,49,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="if (frame < 1) return;
//debug('onChange: ' + x + ': ' + Level.x);
if (x) { // && Level.x == 0) {
	debug(displayName + ' SWITCH ON! ' + lastValue);
	sendCC(activeCC, 64, displayName + ' Switch On');
	//sendCC(levelCC, max(lastValue, Level.minValue+1), displayName + ' Switch On');
} else if (!x) {
	lastValue = Level.currentValue;

	debug(displayName + ' SWITCH OFF: ' + lastValue);
	sendCC(activeCC, 0, displayName + ' Switch Off');
	//sendCC(levelCC, 0, 'Switch Off');
}

active = x;

//Level.x = x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/OnOff/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Fader" text="Level" x="0" y="0" width="120" height="430" id="15" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="1596013" cursor="0" grid="0" grid_steps="1" label="0" physic="0" precision="0" unit=" dB" value="1" zoom="1.000000">
<PARAM name="x=" value="0.677165" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<PARAM name="z=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/z" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="value=db" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="attraction=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/attraction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="friction=0.9" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/friction" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="speed=1" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/speed" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=round(x*(127-minValue)) + minValue" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="db=-20 + (currentValue/127)*40" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/db" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="minValue=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Level/minValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="//active = (currentValue > 0)
if (z) {
sendCC(levelCC, currentValue, displayName + ' Level');
OnOff.x = (currentValue > 0);
}
" trigger_script="currentValue" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/Level/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);


//decl _val = received[1];
decl _x = (val > minValue) ? (val - minValue)/(127 - minValue) : 0;
//debug(displayName + ' levelCC receive: ' + _val + ' _x: ' + _x + ' z? ' + z);
if (!z) x = _x;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/Level/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Switches" x="129" y="17" width="847" height="300" id="17" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="5">
<PARAM name="x=" value="0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=active ? 0 : -0.2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pads=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/pads" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12310,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValue=" value="2.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/currentValue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="codes=" value="0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/codes" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentLabel=" value="'Lowcut 2'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/currentLabel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28261,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="labels=" value="'No Style','Lowcut 1','Lowcut 2','Bandpass 1','Bandpass 2','Highcut','Midcut','Soft Drive','Medium Drive','Hard Drive','Radio','Radio Drive','Peak Radio','Boxey Radio','Clear Megaphone','Clip Megaphone','Beat Box'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/Switches/labels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="570,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="decl i = firstof(x);
currentValue = codes[i];
currentLabel = labels[i];
if (frame < 1) return;
log(displayName + ' onChange: ' + currentValue + ' ' + currentLabel);
OnOff.x = 1;
sendCC(styleCC, currentValue, displayName + ' Switches');



" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="decl this, red, green, blue, grey;

this = getobject();

red = RGB(1,0,0);
green = RGB(0,1,0);
blue = RGB(0,0,1);
grey = RGB(.5,.5,.5);

decl colors = {red,green,blue,grey,red,green};
//decl styles = {
//0,'Octave Down',
//1,'Octave Up',
//2,'Mixed Octaves Choir',
//3,'Unison Choir'
//};

labels = -1;
codes = -1; // lookup midi code for pad index
pads = stretch(0, 128); // lookup pad index for midi code

//decl styles = st;
decl i=0, length=sizeof(styles), code, label;
for (i=0; i < length; i+=2) {
	code = styles[i];
	label = styles[i+1];

  codes = codes != -1 ? { codes, code } : { code };
  labels = labels != -1 ? { labels, label } : { label };
  pads = replace(pads, sizeof(codes)-1, code);

//debug(displayName + ' ' + label + ': ' + code);
}


setattribute(this,'labels',labels);
//setattribute(this,'colors',colors);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/Switches/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
//decl _val = received[1];
//decl _src = received[2];

//if (_src == 'remote') {

decl plen = sizeof(pads), pval = pads[val];
log(displayName + stringify({
	'plen', plen,
	'pval', pval
}));
decl _x = stretch(0, plen);
_x = replace(_x, 1, pval);
x = _x;
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/Switches/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="levelCC=" value="105" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styleCC=" value="55" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/styleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=" value="'Transducer'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="active=" value="1.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/active" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="styles=" value="0,'No Style',1,'Lowcut 1',2,'Lowcut 2',3,'Bandpass 1',4,'Bandpass 2',5,'Highcut',6,'Midcut',7,'Soft Drive',8,'Medium Drive',9,'Hard Drive',10,'Radio',11,'Radio Drive',12,'Peak Radio',13,'Boxey Radio',14,'Clear Megaphone',15,'Clip Megaphone',16,'Beat Box'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/styles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="activeCC=" value="118" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/Transducer/activeCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="displayName = getattribute(getobject(), 'name');
//setattribute(Text, 'content', displayName);

//setattribute(OnOff, 'label_off', displayName); // + ': Off');
//setattribute(OnOff, 'label_on', displayName); // + ': On');
" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onActive()" script="if (frame < 1) return;
///log(active ? 'active' : 'NOT active');
decl this = getobject();
//decl fader = 1596013; //4144959, 
decl green = RGB(0, 1, 0), gray = RGB(0.5,0.5,0.5), white = RGB(1,1,1);
decl color = active ? highlightColor : gray;
//log('color: ' + color);
setattribute(this, 'color', color);
//setattribute(CurrentStyle, 'color', { active ? green : gray, white });
setattribute(Level, 'color', active ? highlightColor : gray);
setattribute(OnOff, 'color', { gray, highlightColor });

//decl c2 = getattribute(Level, 'color');
//log('c2: ' + c2);
" trigger_script="active" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/onActive" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="Switches.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="
if (frame < 1) return;
//decl cc = received[0], val = received[1], src = received[2];
if (cc == activeCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//Level.onReceive();
	OnOff.x = (val >= 64);
} else if (cc == levelCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('enableCC receive:' + _val);
	//OnOff.x = round(_val/64);
	Level.onCC(cc, val, src);
} else if (cc == styleCC) {
	debug(displayName + ': onReceive: ' + cc + ', ' + val + ', ' + src);
	//debug('styleCC receive:' + _val);
	////Style.onReceive();
	//StyleMenu.onReceive

	Switches.onCC(cc, val, src);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/Transducer/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="TransducerHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/TransducerHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/TransducerHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/TransducerHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/TransducerHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Transducer">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/TransducerHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Key/Scale" x="0" y="0" width="992" height="660" id="13" state="1" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="KeyScale" x="0" y="100" width="964" height="503" id="1" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Container" text="Keyboard" x="35" y="28" width="952" height="315" id="25" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="WhiteKeys" x="16" y="11" width="592" height="309" id="25" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="1" redrawMode="1" touchSupport="1">
<SCRIPT name="draw()" script="decl highlight = highlightColor; //{0.2,0.2,0.8};
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);


//if (debugStr) debugStr = debugStr + ' white: ' + selected;

decl i,x,y,w,width,height,h,color,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
h = height;
radius = 1;

decl whiteKeys = { 0,2,4,5,7,9,11 };
decl blackKeys = { 1,3,6,8,10 };

// Draw white keys
color = 1.0;
h = height;
for (i=0;i<7;i++){
	x = (width * i) / 7;
	w = (width / 7) - 4;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (whiteKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
}
/*
// Draw black keys
color = 0.2;
h = height * 0.66;
for (i=0;i<5;i++){
	if (i<2) x = (width * ((i * 2) + 1) / 14);
	else x = (width * ((i * 2) + 3) / 14);
	w = (width / 7) - 4;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, blackKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (blackKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
	}*/" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/WhiteKeys/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="selected = hit;
//debugStr = debugStr + ' white: ' + hit;
//redrawKeys();" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/WhiteKeys/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onResize()" script="canvas_refresh(getobject());" trigger_script="getattribute(getobject(),'rect')" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/WhiteKeys/onResize" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="BlackKeys3" x="325" y="11" width="245" height="187" id="26" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="1" redrawMode="1" touchSupport="1">
<SCRIPT name="draw()" script="decl highlight = highlightColor; //{0.2,0.2,0.8};
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);


//if (debugStr) debugStr = debugStr + ' draw: ' + selected;

decl i,x,y,w,width,height,h,color,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
h = height;
radius = 1;

//decl whiteKeys = { 0,2,4,5,7,9,11 };
//decl blackKeys = { 1,3,6,8,10 };
/*
// Draw white keys
color = 1.0;
h = height;
for (i=0;i<7;i++){
	x = (width * i) / 7;
	w = (width / 7) - 4;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (whiteKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
}*/

// Draw black keys
color = 0.2;
h = height; // * 0.66;
for (i=2;i<5;i++){
	//if (i<2) x = (width * ((i * 2) + 1) / 14);
	//else 
	x = (width/3) * (i-2);
	w = (width / 3) - 10;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, blackKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (blackKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
	}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys3/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="selected = hit;
//redrawKeys();" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys3/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onResize()" script="canvas_refresh(getobject());" trigger_script="getattribute(getobject(),'rect')" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys3/onResize" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Canvas" text="BlackKeys2" x="63" y="11" width="161" height="187" id="27" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="1" redrawMode="1" touchSupport="1">
<SCRIPT name="draw()" script="decl highlight = highlightColor; //{0.2,0.2,0.8};
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);


//if (debugStr) debugStr = debugStr + ' draw: ' + selected;

decl i,x,y,w,width,height,h,color,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
h = height;
radius = 1;

//decl whiteKeys = { 0,2,4,5,7,9,11 };
//decl blackKeys = { 1,3,6,8,10 };
/*
// Draw white keys
color = 1.0;
h = height;
for (i=0;i<7;i++){
	x = (width * i) / 7;
	w = (width / 7) - 4;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (whiteKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
}*/

// Draw black keys
color = 0.2;
h = height; // * 0.66;
for (i=0;i<2;i++){
//	if (i<2) 
//x = (width  (i*2));
x = (width * i) / 2;
//	else x = (width * ((i * 2) + 3) / 14);
	w = (width / 2) - 10;
	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	canvas_addHitRegion(c, 0, blackKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, (blackKeys[i] == selected) ? highlight : color);
	canvas_fill(c);
	}" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys2/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="touch(cursor,hit,x,y)" script="selected = hit;
//redrawKeys();" trigger_script="" trigger_type="255" trigger_name="onCursorDown" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys2/touch" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onResize()" script="canvas_refresh(getobject());" trigger_script="getattribute(getobject(),'rect')" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/BlackKeys2/onResize" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="selected=" value="0.000000" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Keyboard/selected" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="whiteKeys={ 0,2,4,5,7,9,11 }" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Keyboard/whiteKeys" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="blackKeys={ 1,3,6,8,10 }" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Keyboard/blackKeys" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="highlightColor={0,1,0}" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Keyboard/highlightColor" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="redrawKeys()" script="debug('redraw keys');
canvas_refresh(WhiteKeys);
canvas_refresh(BlackKeys2);
canvas_refresh(BlackKeys3);" trigger_script="selected" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/Keyboard/redrawKeys" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Switches" text="Scale" x="51" y="351" width="610" height="105" id="26" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="6" label="1" multicolor="0" multilabel="1" paint="0" radio="1" row="1">
<PARAM name="x=" value="1.000000,0.000000,0.000000,0.000000,0.000000,0.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Scale/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,1,1" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Scale/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Label1" x="58" y="18" width="72" height="30" id="27" state="213" group="0" font="tahoma,12,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="8355711" content="Key">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/Label1/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="key=Keyboard.selected" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/key" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="keyCC=47" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/keyCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="25963,15993,2314" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="scaleCC=48" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/scaleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="scales=" value="'Major 7th','Major','Major Blues','Minor-Harmonic','Minor-Natural','Minor-Melodic','Custom'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScale/scales" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onKeyChange()" script="if (frame < 1) return;
sendCC(keyCC, key, 'Key Change');" trigger_script="key" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/onKeyChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onScaleChange()" script="if (frame < 1) return;
decl val = firstof(Scale.x);
sendCC(scaleCC, val, 'Scale Change');
" trigger_script="firstof(Scale.x)" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/onScaleChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="debug(displayName + '.' + getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);

if (frame < 1) return;

//decl _cc = received[0];
//decl _val = received[1];
if (cc == keyCC) {
debug('keyCC receive:' + val);
Keyboard.selected = val;
//Keyboard.redrawKeys();
} else if (cc == scaleCC) {
debug('scaleCC receive:' + val);
decl _x = stretch(0, sizeof(Scale.x));
_x = replace(_x, 1, val);
Scale.x = _x;
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="//Scale.init();
updateScales();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="updateScales()" script="decl this = getobject();
setattribute(Scale,'labels',scales);" trigger_script="scales" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScale/updateScales" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="KeyScaleHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScaleHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScaleHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScaleHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/KeyScaleHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Key / Scale">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/KeyScaleHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
</WINDOW>
<WINDOW class="Tab" text="Settings" x="0" y="0" width="992" height="660" id="5" state="0" group="0" font="tahoma,11,0" >
<WINDOW class="Container" text="DeviceSettings" x="0" y="100" width="774" height="157" id="4" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Switches" text="DeviceSwitch" x="0" y="48" width="728" height="81" id="2" state="1" group="0" font="tahoma,16,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="3" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="1">
<PARAM name="x=" value="1.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/DeviceSwitch/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/DeviceSwitch/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="result=Profile.devices[firstof(x)]" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/DeviceSwitch/result" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Switches" text="Channel" x="10" y="154" width="372" height="87" id="13" state="0" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,1596013" column="5" label="3" multicolor="0" multilabel="0" paint="0" radio="1" row="1">
<PARAM name="x=" value="0.000000,0.000000,0.000000,1.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Channel/x" midi_target="0" midi_trigger="1" midi_message="0xB1,0xB1,2,2" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Channel/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="result=firstof(x)" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Channel/result" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor2" x="19" y="141" width="98" height="32" id="14" state="244" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=Channel.result" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Monitor2/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Container" text="Monitors" x="435" y="154" width="177" height="228" id="15" state="0" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Monitor" text="DeviceName" x="0" y="0" width="160" height="60" id="9" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" precision="3" unit="" value="1">
<VARIABLE name="value=Profile.Current.deviceName" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Monitors/DeviceName/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Channel" x="0" y="70" width="160" height="60" id="10" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" precision="3" unit="" value="1">
<VARIABLE name="value=Profile.Current.channel" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Monitors/Channel/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="CurrentDevice" x="1" y="137" width="160" height="60" id="11" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" precision="3" unit="" value="1">
<VARIABLE name="value=Profile.currentDevice" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Monitors/CurrentDevice/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Text" text="Text2" x="0" y="0" width="223" height="48" id="18" state="213" group="0" font="tahoma,18,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Device">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DeviceSettings/Text2/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<SCRIPT name="apply()" script="show(Monitors, 0);
show(Channel, 0);
show(Monitor2, 0);
decl deviceName = DeviceSwitch.result;

decl device;
if (deviceName == 'touch') {
  device = Profile.Devices.touch;
} else if (deviceName == 'rack') {
  device = Profile.Devices.rack;
} else if (deviceName == 'vl3') {
  device = Profile.Devices.vl3;
} else {
  log2('DeviceSettings BROKEN: no device: ' + deviceName);
}

Profile.setDevice(deviceName, device);
debug('DeviceSettings: apply: ' + deviceName + ' channel: ' + Profile.Current.channel);
" trigger_script="DeviceSwitch.result" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DeviceSettings/apply" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="
setattribute(DeviceSwitch,'labels',Profile.deviceLabels);
//setattribute(this,'colors',def_col);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DeviceSettings/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="DebugButton" x="809" y="538" width="176" height="52" id="5" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="0" bitmap="0,0" capture="1" color="865343,1596013" label_off="DEBUG OFF" label_on="DEBUG ON" outline="1">
<PARAM name="x=" value="1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DebugButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/DebugButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="debug('showDebug: ' + x);
showDebug = round(x);" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DebugButton/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onShowDebug()" script="x = showDebug;" trigger_script="showDebug" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/DebugButton/onShowDebug" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="SettingsHeader" x="0" y="0" width="992" height="100" id="18" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Canvas" text="BG" x="0" y="0" width="976" height="84" id="10" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" aaLevel="0" redrawMode="0" touchSupport="1">
<SCRIPT name="draw()" script="
decl c = getobject();
decl rect = getattribute(getobject(), 'rect');
canvas_clear(c);

decl i,x,y,w,width,height,h,radius;
x = 0;
y = 0;
width = rect[2];
height = rect[3];
w = width;
h = height;
radius = 1;

//decl color = 1.0;
//decl highlight = 0.5;
//decl selected = 0;

	canvas_beginPath(c);
	canvas_moveTo(c, x + radius, y);
	canvas_lineTo(c, x + w - radius, y);
	canvas_arcTo(c, x + w, y, x + w, y + radius, radius);
	canvas_lineTo(c, x + w, y + h - radius);
	canvas_arcTo(c, x + w, y + h, x + w - radius, y + h, radius);
	canvas_lineTo(c, x + radius, y + h);
	canvas_arcTo(c, x, y + h, x, y + h - radius, radius);
	canvas_lineTo(c, x, y + radius);
	canvas_arcTo(c, x, y, x + radius, y, radius);
	//canvas_addHitRegion(c, 0, whiteKeys[i]);
	canvas_closePath(c);
	canvas_setFillStyle(c, bgColor);
	canvas_fill(c);
" trigger_script="" trigger_type="255" trigger_name="onRedraw" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/SettingsHeader/BG/draw" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="CustomButton" text="HomeButton" x="0" y="0" width="130" height="80" id="11" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="38,0" capture="1" color="865343,1596013" label_off="" label_on="" outline="0">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/SettingsHeader/HomeButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/SettingsHeader/HomeButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="selecttab(Actions, 0);" trigger_script="x" trigger_type="0" trigger="2" clock="0" clock_div="4" osc_message="/Container/Actions/SettingsHeader/HomeButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="160" y="0" width="324" height="80" id="12" state="213" group="0" font="tahoma,24,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="327681" content="Settings">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/SettingsHeader/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
</WINDOW>
<WINDOW class="Container" text="NaturalPlaySettings" x="0" y="271" width="615" height="293" id="19" state="5" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Switches" text="NaturalPlay" x="0" y="48" width="559" height="228" id="16" state="1" group="0" font="tahoma,18,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="4" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="2">
<PARAM name="x=" value="0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/NaturalPlaySettings/NaturalPlay/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/NaturalPlaySettings/NaturalPlay/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="decl this = getobject();
setattribute(this, 'labels', Profile.Current.naturalPlayStyles);" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/NaturalPlaySettings/NaturalPlay/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="0" y="0" width="223" height="48" id="17" state="213" group="0" font="tahoma,18,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Natural Play Setting">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/NaturalPlaySettings/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<SCRIPT name="apply()" script="if (frame < 1) return;

decl np = Profile.Current.naturalPlayStyles[firstof(NaturalPlay.x)];
debug('NaturalPlay Setting: apply: ' + np);

Profile.Current.naturalPlayStyle = np;
Profile.initVoicings();
Harmony.Voices.init();
//DeviceSettings.apply();
" trigger_script="NaturalPlay.x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/NaturalPlaySettings/apply" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="LogLevel" x="583" y="460" width="226" height="200" id="21" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Switches" text="Switches" x="0" y="48" width="210" height="136" id="20" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" capture="1" color="865343,32768" column="2" label="0" multicolor="0" multilabel="1" paint="0" radio="1" row="2">
<PARAM name="x=" value="0.000000,0.000000,0.000000,1.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/LogLevel/Switches/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/LogLevel/Switches/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onChange()" script="logLevel = firstof(x);
debugi('LogLevel onChange: ' + logLevel);
" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/LogLevel/Switches/onChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLogLevel()" script="decl _x = stretch(0, 4);
_x = replace(_x, 1, logLevel);
x = _x;" trigger_script="logLevel" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/LogLevel/Switches/onLogLevel" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Text" text="Text" x="0" y="0" width="160" height="48" id="21" state="245" group="0" font="tahoma,14,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Logging Level">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/LogLevel/Text/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<SCRIPT name="onLoad()" script="setattribute(Switches, 'labels', { 'All', 'Debug', 'Level 1', 'Level 2' });" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/LogLevel/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
<VARIABLE name="fxTabIndex=3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/fxTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayTabIndex=4" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/delayTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="reverbTabIndex=3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/reverbTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,87,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="transducerTabIndex=7" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/transducerTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,28015,25711" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="umodTabIndex=6" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/umodTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="doubleTabIndex=5" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/doubleTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8168,0,-256" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="highlightColor=1596013" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/highlightColor" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,22,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="bgColor=0.5" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/bgColor" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="frame=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/frame" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="16633,-30960,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyTabIndex=2" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/harmonyTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneTabIndex=1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Actions/hardtuneTabIndex" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-16384,25964,25640" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onDeviceChange()" script="decl c = Profile.currentDevice;

log2('Actions, Current device: ' + c);

Hardtune.activeCC = getProfile('hardtuneCC');
Hardtune.styleCC = getProfile('hardtuneStyleCC');
Hardtune.styles = getProfile('hardtuneStyles');
//log2('styles: ' + sizeof(Hardtune.styles));

if (c == 'touch') {
	KeyScale.scales = Profile.touchScales;
} else {
	KeyScale.scales = getProfile('hardtuneScales');
}
KeyScale.keyCC = getProfile('hardtuneKeyCC');
KeyScale.scaleCC = getProfile('hardtuneScaleCC');

// FX
uMod.styles = getProfile('uModStyles');
uMod.activeCC = getProfile('umodCC');
uMod.levelCC = getProfile('umodLevelCC');
uMod.styleCC = getProfile('umodStyleCC');

Reverb.styles = getProfile('reverbStyles');
Reverb.activeCC = getProfile('reverbCC');
Reverb.levelCC = getProfile('reverbLevelCC');
Reverb.styleCC = getProfile('reverbStyleCC');

Delay.styles = getProfile('delayStyles');
Delay.activeCC = getProfile('delayCC');
Delay.levelCC = getProfile('delayLevelCC');
Delay.styleCC = getProfile('delayStyleCC');

Double.styles = getProfile('doubleStyles');
Double.activeCC = getProfile('doubleCC');
Double.levelCC = getProfile('doubleLevelCC');
Double.styleCC = getProfile('doubleStyleCC');


Transducer.styles = getProfile('transStyles');
Transducer.activeCC = getProfile('transCC');
Transducer.levelCC = getProfile('transLevelCC');
Transducer.styleCC = getProfile('transStyleCC');" trigger_script="Profile.currentDevice" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/onDeviceChange" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="//handlers = {''};
//KeyScale.initHandler();


debugi('Actions: onLoad');
displayName = 'Actions';" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="init()" script="log('-------- Actions.init ' + time);
DeviceSettings.init();

DeviceSettings.apply();
//NaturalPlaySettings.apply();

frame = 0;

" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onFrame()" script="//log('frame: ' + frame);
if (frame >= 0 && frame < initFrame) {
	//debug('Actions, frame: ' + frame);
	frame = frame+1;

	if (frame == initFrame) {
		startInterface();
	}
}

//dequeueMidi();
" trigger_script="" trigger_type="1" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/onFrame" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="startInterface()" script="debug('----- Actions.startInterface');

KeyScale.init();
uMod.init();
Delay.init();
Double.init();
Hardtune.init();
Harmony.init();
Reverb.init();
Transducer.init();

Mixer.init();" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/startInterface" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug('Actions: onReceive: ' + cc + ', ' + val + ', ' + src);
uMod.onCC(cc, val, src);
Delay.onCC(cc, val, src);
Double.onCC(cc, val, src);
Hardtune.onCC(cc, val, src);
Harmony.onCC(cc, val, src);
Mixer.onCC(cc, val, src);
Reverb.onCC(cc, val, src);
Transducer.onCC(cc, val, src);
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Actions/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Debug" x="658" y="125" width="350" height="394" id="28" state="1" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Monitor" text="Monitor5" x="0" y="206" width="320" height="20" id="24" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[5]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor5/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="CustomButton" text="CustomButton" x="0" y="326" width="160" height="52" id="27" state="241" group="0" font="tahoma,20,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="865343,1596013" label_off="Clear" label_on="" outline="1">
<PARAM name="x=" value="0.000000" send="16" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/CustomButton/x" midi_target="0" midi_trigger="1" midi_message="0xB0,0xB0,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/CustomButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onClick()" script="if (x == 1) {
	lines = {''};
}" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Debug/CustomButton/onClick" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor4" x="0" y="226" width="320" height="20" id="28" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[4]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor4/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor3" x="0" y="246" width="320" height="20" id="29" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[3]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor3/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor2" x="0" y="266" width="320" height="20" id="30" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[2]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor2/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor1" x="0" y="286" width="320" height="20" id="31" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[1]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor1/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor0" x="0" y="306" width="320" height="20" id="32" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[0]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor0/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor6" x="0" y="186" width="320" height="20" id="33" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[6]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor6/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor7" x="0" y="166" width="320" height="20" id="34" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[7]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor7/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor8" x="0" y="146" width="320" height="20" id="35" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[8]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor8/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor9" x="0" y="126" width="320" height="20" id="36" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[9]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor9/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor10" x="0" y="106" width="320" height="20" id="37" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[10]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor10/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor11" x="0" y="86" width="320" height="20" id="38" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[11]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor11/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor12" x="0" y="66" width="320" height="20" id="39" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[12]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor12/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor13" x="0" y="46" width="320" height="20" id="40" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[13]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor13/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor14" x="0" y="26" width="320" height="20" id="41" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[14]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor14/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Monitor" text="Monitor15" x="0" y="6" width="320" height="20" id="42" state="213" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="0" precision="3" unit="" value="1">
<VARIABLE name="value=lines[15]" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/Monitor15/value" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="CustomButton" text="PanicButton" x="167" y="326" width="153" height="52" id="43" state="241" group="0" font="tahoma,20,0" send="1" osc_target="-2" midi_target="-2" kbmouse_target="-2" behavior="1" bitmap="0,0" capture="1" color="865343,1596013" label_off="Panic!!" label_on="Oooooo.." outline="1">
<PARAM name="x=" value="0.000000" send="17" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/PanicButton/x" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" osc_scale="0.000000,1.000000" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/PanicButton/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onPress()" script="enabled = !x;" trigger_script="x" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/Debug/PanicButton/onPress" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="lines=" value="'Actions, Current device: touch','Setting hardtune mixer label: Stretched Room','Mixer: onDeviceChanged: touch','Hardtune, Current device: touch','Actions, Current device: touch','Setting hardtune mixer label: Stretched Room','Mixer: onDeviceChanged: touch','Hardtune, Current device: touch','currentDevice: touch','*---- Debug ----*'" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Debug/lines" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="onLoad()" script="lines = {'*---- Debug ----*'};" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Debug/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<WINDOW class="Container" text="Profile" x="0" y="0" width="176" height="64" id="29" state="4" group="0" font="tahoma,10,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" label="1" tabbar="1" meta="0">
<WINDOW class="Text" text="Devices" x="0" y="0" width="160" height="48" id="11" state="241" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Devices">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Devices/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="rack=" value="'outputCC',7,'voicesLevelCC',85,'delayReverbLevelCC',86,'auxLevelCC',58,'allOffCC',123,'sustainCC',64,'harmonyHoldCC',119,'bypassCC',114,'dryPanCC',10,'leadMuteCC',13,'toneCC',106,'pitchCC',107,'stepCC',115,'guitarFxCC',108,'guitarLevelCC',109,'guitarRevStyleCC',9,'guitarRevLevelCC',22,'guitarModStyleCC',26,'guitarModLevelCC',28,'hardtuneCC',113,'hardtuneKeyCC',47,'hardtuneScaleCC',48,'hardtuneStyleCC',24,'harmonyCC',110,'harmonyLevelCC',12,'harmonyStyleCC',56,'choirStyleCC',73,'choirLevelCC',72,'voice_1_genderCC',29,'voice_1_levelCC',46,'voice_1_voicingCC',89,'voice_2_genderCC',19,'voice_2_levelCC',17,'voice_2_voicingCC',61,'voice_3_genderCC',23,'voice_3_levelCC',21,'voice_3_voicingCC',88,'voice_4_genderCC',27,'voice_4_levelCC',25,'voice_4_voicingCC',3,'umodCC',116,'umodStyleCC',50,'umodLevelCC',90,'reverbCC',112,'reverbStyleCC',52,'reverbLevelCC',91,'delayCC',117,'delayStyleCC',51,'delayLevelCC',62,'doubleCC',111,'doubleStyleCC',53,'doubleLevelCC',15,'transCC',118,'transStyleCC',55,'transLevelCC',105,'rhythmCC',104,'rhythmStyleCC',87,'rhythmDepthCC',102,'deviceName','Voicelive Rack','channel',3,'hardtune',60" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Devices/rack" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="11641,24930,25971" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="touch=" value="'outputCC',7,'voicesLevelCC',85,'delayReverbLevelCC',86,'auxLevelCC',58,'allOffCC',123,'sustainCC',64,'harmonyHoldCC',119,'bypassCC',114,'dryPanCC',10,'leadMuteCC',13,'toneCC',106,'pitchCC',107,'stepCC',115,'guitarFxCC',108,'guitarLevelCC',109,'guitarRevStyleCC',9,'guitarRevLevelCC',22,'guitarModStyleCC',26,'guitarModLevelCC',28,'hardtuneCC',113,'hardtuneKeyCC',47,'hardtuneScaleCC',48,'hardtuneStyleCC',24,'harmonyCC',110,'harmonyLevelCC',12,'harmonyStyleCC',56,'choirStyleCC',73,'choirLevelCC',72,'voice_1_genderCC',29,'voice_1_levelCC',46,'voice_1_voicingCC',89,'voice_2_genderCC',19,'voice_2_levelCC',17,'voice_2_voicingCC',61,'voice_3_genderCC',23,'voice_3_levelCC',21,'voice_3_voicingCC',88,'voice_4_genderCC',27,'voice_4_levelCC',25,'voice_4_voicingCC',3,'umodCC',116,'umodStyleCC',50,'umodLevelCC',90,'reverbCC',112,'reverbStyleCC',52,'reverbLevelCC',91,'delayCC',117,'delayStyleCC',51,'delayLevelCC',62,'doubleCC',111,'doubleStyleCC',53,'doubleLevelCC',15,'transCC',118,'transStyleCC',55,'transLevelCC',105,'rhythmCC',104,'rhythmStyleCC',87,'rhythmDepthCC',102,'deviceName','Voicelive Touch','channel',2,'hardtuneKeyCC',30,'hardtuneScaleCC',31" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Devices/touch" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-4076,0,-256" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="vl3=" value="'outputCC',7,'voicesLevelCC',85,'delayReverbLevelCC',86,'auxLevelCC',58,'allOffCC',123,'sustainCC',64,'harmonyHoldCC',119,'bypassCC',114,'dryPanCC',10,'leadMuteCC',13,'toneCC',106,'pitchCC',107,'stepCC',115,'guitarFxCC',108,'guitarLevelCC',109,'guitarRevStyleCC',9,'guitarRevLevelCC',22,'guitarModStyleCC',26,'guitarModLevelCC',28,'hardtuneCC',113,'hardtuneKeyCC',47,'hardtuneScaleCC',48,'hardtuneStyleCC',24,'harmonyCC',110,'harmonyLevelCC',12,'harmonyStyleCC',56,'choirStyleCC',73,'choirLevelCC',72,'voice_1_genderCC',29,'voice_1_levelCC',46,'voice_1_voicingCC',89,'voice_2_genderCC',19,'voice_2_levelCC',17,'voice_2_voicingCC',61,'voice_3_genderCC',23,'voice_3_levelCC',21,'voice_3_voicingCC',88,'voice_4_genderCC',27,'voice_4_levelCC',25,'voice_4_voicingCC',3,'umodCC',116,'umodStyleCC',50,'umodLevelCC',90,'reverbCC',112,'reverbStyleCC',52,'reverbLevelCC',91,'delayCC',117,'delayStyleCC',51,'delayLevelCC',62,'doubleCC',111,'doubleStyleCC',53,'doubleLevelCC',15,'transCC',118,'transStyleCC',55,'transLevelCC',105,'rhythmCC',104,'rhythmStyleCC',87,'rhythmDepthCC',102,'deviceName','VoiceLive 3','channel',4,'harmonyVibratoCC',1,'guitarRhythmCC',16,'guitarDelayCC',17,'guitarCompressorCC',19,'guitarModCC',21,'guitarOctaverCC',23,'guitarAmpCC',25,'guitarWahCC',27,'guitarBoostCC',29,'hardtuneKeyCC',30,'hardtuneScaleCC',31,'guitarReverbCC',46,'guitarHitCC',47,'vocalSynthCC',50,'rhythmCC',51,'vocalHitCC',56,'choirCC',104,'stepCC',115,'harmonyHoldCC',119,'allOffCC',123" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Devices/vl3" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="320,852,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<WINDOW class="Text" text="Current" x="0" y="0" width="160" height="48" id="12" state="241" group="0" font="tahoma,14,0" send="0" osc_target="-2" midi_target="-2" kbmouse_target="-2" color="1596013" content="Profile.Current">
<VARIABLE name="light=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/light" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="deviceName=" value="'Voicelive Touch'" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/deviceName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="channel=" value="2" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/channel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="1024,0,8192" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="deviceId=" value="0.000000" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/deviceId" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-8163,50,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="target=0" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/target" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24547,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyLevelCC=" value="12" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyCC=" value="110" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyStyleCC=" value="56" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_1_genderCC=" value="29" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_1_genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,1,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_1_levelCC=" value="46" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_1_levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_1_voicingCC=" value="89" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_1_voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28700,732,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_2_genderCC=" value="19" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_2_genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_2_levelCC=" value="17" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_2_levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_2_voicingCC=" value="61" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_2_voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="20502,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_3_genderCC=" value="23" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_3_genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_3_levelCC=" value="21" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_3_levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_3_voicingCC=" value="88" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_3_voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_4_genderCC=" value="27" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_4_genderCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_4_levelCC=" value="25" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_4_levelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="20502,-19584,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voice_4_voicingCC=" value="3" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voice_4_voicingCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyStyles=" value="0,'1 Above (High)',1,'1 Below (Low)',2,'2 Low+High',3,'2 Above (High+Higher)',4,'2 Below (Lower+Low)',5,'2 (Higher+Lower)',6,'3 (Low+High+Higher)',7,'3 (Lower+Low+High)',8,'3 (Lower+High+Higher)',9,'3 (Lower+Low+High+Higher)',10,'4 Gospel High (Low+High+Higher)',11,'4 Gospel Low (Lower+Low+High)',12,'4 Upper Choir (High+Higher)',13,'4 Lower Choir (Low+Lower)',14,'4 Bass Boys (Low+Lower)'" send="0" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirStyles=" value="0,'Small 1',1,'Small 2',2,'Medium 1',3,'Medium 2',4,'Medium 3',5,'Large',6,'Loose',7,'European',8,'American',9,'Tight',10,'Pitchy',11,'Vibrate',12,'Shake',13,'Speaking',14,'Chaos'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/choirStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29888,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirStyleCC=" value="73" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/choirStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirLevelCC=" value="72" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/choirLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-84,-30208,-84" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="uModStyles=" value="1,'Micromod Clone',2,'Micromod Wider',3,'Thicken',4,'Light Chorus',5,'Medium Chorus',6,'Wide Chorus',7,'Mono Chorus',8,'Fast Rotor',9,'Flanger',10,'Flange Feedback',11,'Flange Negative',12,'Mono Flange',13,'Soft Flange',14,'Panner',15,'Tube',16,'Up Tube',17,'Down Tube',18,'Down & Up Tube',19,'Rise and Fall',20,'Ottowa Wide',21,'Cylon Mono',22,'Cylon Stereo',23,'Alien Voiceover',24,'Underwater'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/uModStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-29536,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="umodCC=" value="116" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/umodCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,1,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="umodLevelCC=" value="90" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/umodLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="umodStyleCC=" value="50" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/umodStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="reverbStyles=" value="1,'Smooth Plate',2,'Soft Hall',3,'Amsterdam Hall',4,'Broadway Hall',5,'Snappy Room',6,'Library',7,'Dark Room',8,'Music Club',9,'Studio Live Room',10,'Stretched Room',11,'Warehouse',12,'Bouncy Room',13,'Real Plate',14,'Reflection Plate',15,'Thin Plate',16,'Bright Chamber',17,'Bright Plate',18,'Real Plate Short',19,'Real Plate Long',20,'Wooden Chamber',21,'Jazz Plate',22,'Quick Plate',23,'St. Joseph Church',24,'Hockey Arena',25,'Dome Chapel',26,'Museum',27,'Indoor Arena',28,'Cozy Corner',29,'Thin Spring',30,'Full Spring'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/reverbStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-13668,415" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="reverbCC=" value="112" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/reverbCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="reverbLevelCC=" value="91" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/reverbLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-32737,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="reverbStyleCC=" value="52" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/reverbStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayStyles=" value="0,'No Style',1,'Quarter',2,'Eighth',3,'Triplet',4,'Dotted',5,'Long Dot',6,'Long Trip',7,'Sixteenth',8,'Ping Pong 1',9,'Ping Pong 2',10,'Ping Pong 3',11,'Multitap 1',12,'Multitap 2',13,'Multitap 3',14,'Multitap 4',15,'Multitap 5',16,'Multitap 6',17,'Classic Slap',18,'Single Slap'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/delayStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,2,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayCC=" value="117" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/delayCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayLevelCC=" value="62" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/delayLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayStyleCC=" value="51" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/delayStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4125,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="doubleStyles=" value="0,'1 Voice Tight',1,'1 Voice Loose',2,'2 Voices Wide',3,'4 Voices Tight',4,'4 Voices Wide',5,'4 Voices Mono'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/doubleStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="49,-15232,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="doubleCC=" value="111" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/doubleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="doubleStyleCC=" value="53" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/doubleStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-25120,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="doubleLevelCC=" value="15" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/doubleLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="20500,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="transStyles=" value="0,'No Style',1,'Lowcut 1',2,'Lowcut 2',3,'Bandpass 1',4,'Bandpass 2',5,'Highcut',6,'Midcut',7,'Soft Drive',8,'Medium Drive',9,'Hard Drive',10,'Radio',11,'Radio Drive',12,'Peak Radio',13,'Boxey Radio',14,'Clear Megaphone',15,'Clip Megaphone',16,'Beat Box'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/transStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="transCC=" value="118" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/transCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28532,24951,22304" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="transLevelCC=" value="105" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/transLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="transStyleCC=" value="55" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/transStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="outputCC=" value="7" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/outputCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voicesLevelCC=" value="85" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voicesLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="delayReverbLevelCC=" value="86" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/delayReverbLevelCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,29576,60" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="leadMuteCC=" value="13" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/leadMuteCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,22,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="toneCC=" value="106" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/toneCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="pitchCC=" value="107" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/pitchCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="266,13088,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneCC=" value="113" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="28265,8295,125" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="naturalPlayStyles=" value="'Auto','Guitar','MIDI','Aux','Scale','Shift','Notes','4Chan'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/naturalPlayStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="268,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="naturalPlayStyle=" value="'Aux'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/naturalPlayStyle" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,26740,20512" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="voicings=" value="'Octave Down','Bass','Lower','Low','High','Higher','Octave Up'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/voicings" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-16116,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="numVoicings=" value="7" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/numVoicings" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="250,0,-256" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneKeyCC=" value="30" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneKeyCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="15159,24820,17196" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneScaleCC=" value="31" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneScaleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="11892,28534,25449" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyVibratoCC=" value="1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyVibratoCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarRhythmCC=" value="16" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarRhythmCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-24543,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarDelayCC=" value="17" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarDelayCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="450,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarCompressorCC=" value="19" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarCompressorCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarModCC=" value="21" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarModCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarOctaverCC=" value="23" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarOctaverCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,1,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarAmpCC=" value="25" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarAmpCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="450,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarWahCC=" value="27" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarWahCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarBoostCC=" value="29" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarBoostCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="4480,19968,20" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarReverbCC=" value="46" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarReverbCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="guitarHitCC=" value="47" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/guitarHitCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="rhythmCC=" value="104" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/rhythmCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="rhythmStyleCC=" value="87" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/rhythmStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="rhythmDepthCC=" value="102" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/rhythmDepthCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="vocalSynthCC=" value="50" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/vocalSynthCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,1,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="vocalHitCC=" value="56" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/vocalHitCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="choirCC=" value="104" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/choirCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="stepCC=" value="115" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/stepCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="harmonyHoldCC=" value="119" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/harmonyHoldCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="allOffCC=" value="123" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/allOffCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,4,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneStyleCC=" value="24" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneStyleCC" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-208,12336,-208" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneStyles=" value="10,'Natural',1,'Hard',4,'Up',5,'Down',12,'Natural Male',3,'Hard Male',8,'Male Up',7,'Male Down',11,'Natural Female',2,'Hard Female',6,'Female Up',9,'Female Down'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneStyles" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="hardtuneScales=" value="'Major','Minor-Harmonic','Minor-Natural','Minor-Ascending','Chromatic','Custom'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/Current/hardtuneScales" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,640,0" kbmouse_scale="0,1,0,1"/>
</WINDOW>
<VARIABLE name="devices={'touch','rack', 'vl3'}" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/devices" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="commonConfig=" value="0.000000" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/commonConfig" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-20461,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentDevice=" value="'touch'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/currentDevice" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,-25120,18" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ccNames=" value="-1,-1,-1,'voice_4_voicingCC',-1,-1,-1,'outputCC',-1,'guitarRevStyleCC','dryPanCC',-1,'harmonyLevelCC','leadMuteCC',-1,'doubleLevelCC',-1,'voice_2_levelCC',-1,'voice_2_genderCC',-1,'voice_3_levelCC','guitarRevLevelCC','voice_3_genderCC','hardtuneStyleCC','voice_4_levelCC','guitarModStyleCC','voice_4_genderCC','guitarModLevelCC','voice_1_genderCC',-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,'voice_1_levelCC','hardtuneKeyCC','hardtuneScaleCC',-1,'umodStyleCC','delayStyleCC','reverbStyleCC','doubleStyleCC',-1,'transStyleCC','harmonyStyleCC',-1,'auxLevelCC',-1,-1,'voice_2_voicingCC','delayLevelCC',-1,'sustainCC',-1,-1,-1,-1,-1,-1,-1,'choirLevelCC','choirStyleCC',-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,'voicesLevelCC','delayReverbLevelCC','rhythmStyleCC','voice_3_voicingCC','voice_1_voicingCC','umodLevelCC','reverbLevelCC',-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,'rhythmDepthCC',-1,'rhythmCC','transLevelCC','toneCC','pitchCC','guitarFxCC','guitarLevelCC','harmonyCC','doubleCC','reverbCC','hardtuneCC','bypassCC','stepCC','umodCC','delayCC','transCC','harmonyHoldCC',-1,-1,-1,'allOffCC',-1,-1,-1,-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/ccNames" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,15,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="ccs=" value="'outputCC',7,'voicesLevelCC',85,'delayReverbLevelCC',86,'auxLevelCC',58,'allOffCC',123,'sustainCC',64,'harmonyHoldCC',119,'bypassCC',114,'dryPanCC',10,'leadMuteCC',13,'toneCC',106,'pitchCC',107,'stepCC',115,'guitarFxCC',108,'guitarLevelCC',109,'guitarRevStyleCC',9,'guitarRevLevelCC',22,'guitarModStyleCC',26,'guitarModLevelCC',28,'hardtuneCC',113,'hardtuneKeyCC',47,'hardtuneScaleCC',48,'hardtuneStyleCC',24,'harmonyCC',110,'harmonyLevelCC',12,'harmonyStyleCC',56,'choirStyleCC',73,'choirLevelCC',72,'voice_1_genderCC',29,'voice_1_levelCC',46,'voice_1_voicingCC',89,'voice_2_genderCC',19,'voice_2_levelCC',17,'voice_2_voicingCC',61,'voice_3_genderCC',23,'voice_3_levelCC',21,'voice_3_voicingCC',88,'voice_4_genderCC',27,'voice_4_levelCC',25,'voice_4_voicingCC',3,'umodCC',116,'umodStyleCC',50,'umodLevelCC',90,'reverbCC',112,'reverbStyleCC',52,'reverbLevelCC',91,'delayCC',117,'delayStyleCC',51,'delayLevelCC',62,'doubleCC',111,'doubleStyleCC',53,'doubleLevelCC',15,'transCC',118,'transStyleCC',55,'transLevelCC',105,'rhythmCC',104,'rhythmStyleCC',87,'rhythmDepthCC',102" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/ccs" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,8230,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="deviceLabels={ 'VoiceLive Touch', 'VoiceLive Rack', 'VoiceLive 3' }" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/deviceLabels" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="touchScales=" value="'Major 7th','Major','Major Blues','Minor-Harmonic','Minor-Natural','Minor-Melodic','Custom'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/Profile/touchScales" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="12352,0,0" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="init()" script="debugi('Profile: onLoad');
initCCs();
//currentDevice = 0;
ccNames = stretch(-1, 128);
setCCNames(ccs);


touchScales = {
'Major 7th',
'Major',
'Major Blues',
'Minor-Harmonic',
'Minor-Natural',
'Minor-Melodic',
'Custom'
};

Devices.touch = { ccs, {
  {'deviceName', 'Voicelive Touch'},
  {'channel', 2},
  { 'hardtuneKeyCC', 30 },
  { 'hardtuneScaleCC', 31}
}};

Devices.rack = { ccs, {
  {'deviceName', 'Voicelive Rack'},
  {'channel', 3},
  {'hardtune', 60}
}};

Devices.vl3 = { ccs, {
  {'deviceName', 'VoiceLive 3'},
  {'channel', 4},
  {'harmonyVibratoCC', 1},
  {'guitarRhythmCC', 16},
  {'guitarDelayCC', 17},
  {'guitarCompressorCC', 19},
  {'guitarModCC', 21},
  {'guitarOctaverCC', 23},
  {'guitarAmpCC', 25},
  {'guitarWahCC', 27},
  {'guitarBoostCC', 29},
  {'hardtuneKeyCC', 30}, // override
  {'hardtuneScaleCC', 31}, // override
  {'guitarReverbCC', 46},
  {'guitarHitCC', 47},
  {'vocalSynthCC', 50},
  {'rhythmCC', 51}, // override
  {'vocalHitCC', 56},
  {'choirCC', 104},
  //{'vocalHarmonyCC', 110},
 // {'doubleCC', 111},
 // {'reverbCC', 112},
 // {'hardtuneCC', 113},
  {'stepCC', 115},
 // {'umodCC', 116},
  //{'transCC', 118},
  {'harmonyHoldCC', 119},
  {'allOffCC', 123}
}};

initStyles();
initVoicings();
//log('pitchCSS: ' + getProfile('pitchCC'));" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/init" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="applyConfig(target, props)" script="//log2('applyConfig');
decl i=0, length=sizeof(props), prop, val;
for (i=0; i < length; i+=2) {
  prop = props[i];
  val = props[i+1];
  setexpression(target, prop, val);
  //log2('SET: ' + prop + ' = ' + val);
}
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/applyConfig" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setCCNames(list)" script="debugi('setCCNames()');
decl i=0, length=sizeof(list), prop, val;
for (i=0; i < length; i+=2) {
	prop = list[i];
	val = list[i+1];
	ccNames[val] = prop;
	//debugi('SET CCNAME: ' + val + ' = ' + prop);
}
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/setCCNames" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="setDevice(name, props)" script="applyConfig(Current, props);

currentDevice = name;
log2('currentDevice: ' + name);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/setDevice" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="initCCs()" script="
ccs = {
// Globals
'outputCC', 7,
'voicesLevelCC', 85,
'delayReverbLevelCC', 86,
'auxLevelCC', 58,
'allOffCC', 123,
'sustainCC', 64,
'harmonyHoldCC', 119,
'bypassCC', 114,
'dryPanCC', 10,
'leadMuteCC', 13,
'toneCC', 106, // 0-63 off 64-127 on On/Off only
'pitchCC', 107, // maps to 127 0=off
'stepCC', 115,  // 0 to the # of steps in preset 0=Step 1, 1=Step 2 etc.

// Guitar
'guitarFxCC', 108, //0-63 off 64-127 on On/Off only
'guitarLevelCC', 109, // maps to 127
'guitarRevStyleCC', 9, // 0=30
'guitarRevLevelCC', 22, // maps to 127
'guitarModStyleCC', 26, // 0-24
'guitarModLevelCC', 28, // maps to 127

// Hardtune
	'hardtuneCC', 113,
	'hardtuneKeyCC', 47,
	'hardtuneScaleCC', 48,
  	'hardtuneStyleCC', 24, // VL touch only

// Harmony
	'harmonyCC', 110,
	'harmonyLevelCC', 12,
	'harmonyStyleCC', 56,
	'choirStyleCC', 73,
	'choirLevelCC', 72,

// Voice 1
	'voice_1_genderCC', 29,
	'voice_1_levelCC', 46,
	'voice_1_voicingCC', 89,
// Voice 2
	'voice_2_genderCC', 19,
	'voice_2_levelCC', 17,
	'voice_2_voicingCC', 61,
// Voice 3
	'voice_3_genderCC', 23,
	'voice_3_levelCC', 21,
	'voice_3_voicingCC', 88,
// Voice 4
	'voice_4_genderCC', 27,
	'voice_4_levelCC', 25,
	'voice_4_voicingCC', 3,

// uMod
	'umodCC', 116,
	'umodStyleCC', 50,
	'umodLevelCC', 90,

// Reverb
	'reverbCC', 112,
	'reverbStyleCC', 52,
	'reverbLevelCC', 91,

// Delay
	'delayCC', 117,
	'delayStyleCC', 51,
	'delayLevelCC', 62,

// Double
	'doubleCC', 111,
	'doubleStyleCC', 53,
	'doubleLevelCC', 15,

// Transducer
	'transCC', 118,
	'transStyleCC', 55,
	'transLevelCC', 105,

// Rhythmic
	'rhythmCC', 104,
	'rhythmStyleCC', 87,
	'rhythmDepthCC', 102
};
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/initCCs" midi_message="0x90,0x90,0,0" midi_target="-1" flag="0"/>
<SCRIPT name="initStyles()" script="debugi('Profile.initStyles()');

Current.naturalPlayStyles = {
'Auto',
'Guitar',
'MIDI',
'Aux',
'Scale',
'Shift',
'Notes',
'4Chan'
};

Current.hardtuneScales = {
'Major',
'Minor-Harmonic',
'Minor-Natural',
'Minor-Ascending',
'Chromatic',
'Custom'
};

// Style Names
Current.harmonyStyles = {
0, '1 Above (High)',
1, '1 Below (Low)',
2, '2 Low+High',
3, '2 Above (High+Higher)',
4, '2 Below (Lower+Low)',
5, '2 (Higher+Lower)',
6, '3 (Low+High+Higher)',
7, '3 (Lower+Low+High)',
8, '3 (Lower+High+Higher)',
9, '3 (Lower+Low+High+Higher)',
10, '4 Gospel High (Low+High+Higher)',
11, '4 Gospel Low (Lower+Low+High)',
12, '4 Upper Choir (High+Higher)',
13, '4 Lower Choir (Low+Lower)',
14, '4 Bass Boys (Low+Lower)'
};
//log(getProfile('harmonyStyles'));
Current.choirStyles = {
0, 'Small 1',
1, 'Small 2',
2, 'Medium 1',
3, 'Medium 2',
4, 'Medium 3',
5, 'Large',
6, 'Loose',
7, 'European',
8, 'American',
9, 'Tight',
10, 'Pitchy',
11, 'Vibrate',
12, 'Shake',
13, 'Speaking',
14, 'Chaos'
};

Current.uModStyles = {
//0, 'No Style',
1, 'Micromod Clone',
2, 'Micromod Wider',
3, 'Thicken',
4, 'Light Chorus',
5, 'Medium Chorus',
6, 'Wide Chorus',
7, 'Mono Chorus',
8, 'Fast Rotor',
9, 'Flanger',
10, 'Flange Feedback',
11, 'Flange Negative',
12, 'Mono Flange',
13, 'Soft Flange',
14, 'Panner',
15, 'Tube',
16, 'Up Tube',
17, 'Down Tube',
18, 'Down & Up Tube',
19, 'Rise and Fall',
20, 'Ottowa Wide',
21, 'Cylon Mono',
22, 'Cylon Stereo',
23, 'Alien Voiceover',
24, 'Underwater'
}; 

Current.reverbStyles = {
//0,'No Style',
1,'Smooth Plate',
2,'Soft Hall',
3,'Amsterdam Hall',
4,'Broadway Hall',
5,'Snappy Room',
6,'Library',
7,'Dark Room',
8,'Music Club',
9,'Studio Live Room',
10,'Stretched Room',
11,'Warehouse',
12,'Bouncy Room',
13,'Real Plate',
14,'Reflection Plate',
15,'Thin Plate',
16,'Bright Chamber',
17,'Bright Plate',
18,'Real Plate Short',
19,'Real Plate Long',
20,'Wooden Chamber',
21,'Jazz Plate',
22,'Quick Plate',
23,'St. Joseph Church',
24,'Hockey Arena',
25,'Dome Chapel',
26,'Museum',
27,'Indoor Arena',
28,'Cozy Corner',
29,'Thin Spring',
30,'Full Spring'
}; 

Current.delayStyles = {
0,'No Style',
1,'Quarter',
2,'Eighth',
3,'Triplet',
4,'Dotted',
5,'Long Dot',
6,'Long Trip',
7,'Sixteenth',
8,'Ping Pong 1',
9,'Ping Pong 2',
10,'Ping Pong 3',
11,'Multitap 1',
12,'Multitap 2',
13,'Multitap 3',
14,'Multitap 4',
15,'Multitap 5',
16,'Multitap 6',
17,'Classic Slap',
18,'Single Slap'
}; 

Current.doubleStyles = {
0, '1 Voice Tight',
1, '1 Voice Loose',
2, '2 Voices Wide',
3, '4 Voices Tight',
4, '4 Voices Wide',
5, '4 Voices Mono'
};

Current.transStyles = {
0, 'No Style',
1, 'Lowcut 1',
2, 'Lowcut 2',
3, 'Bandpass 1',
4, 'Bandpass 2',
5, 'Highcut',
6, 'Midcut',
7, 'Soft Drive',
8, 'Medium Drive',
9, 'Hard Drive',
10, 'Radio',
11, 'Radio Drive',
12, 'Peak Radio',
13, 'Boxey Radio',
14, 'Clear Megaphone',
15, 'Clip Megaphone',
16, 'Beat Box'
};

Current.hardtuneStyles = {
//0, 'Off',

10, 'Natural',
1, 'Hard',
4, 'Up',
5, 'Down',

12, 'Natural Male',
3, 'Hard Male',
8, 'Male Up',
7, 'Male Down',

11, 'Natural Female',
2, 'Hard Female',
6, 'Female Up',
9, 'Female Down'
};

" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/initStyles" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="initVoicings()" script="decl np = Current.naturalPlayStyle;
if (np == 'Scale') {
	debugi('Loading scale voicings');
Current.voicings = {
'-2ve', //0',
'--7', //1',
'--6', //2',
'--5', //3',
'--4', //4',
'--3', //5',
'--2', //6',
'-1ve', //7',
'-7th', //8',
'-6th', //'9',
'-5th', //10',
'-4th', //11,
'-3rd', //12,
'-2nd', //13,
'=', //14,
'+2nd', //15,
'+3rd', //16,
'+4th', //17,
'+5th', //18,
'+6th', //19,
'+7th', //20,
'+1ve', //21,
'++2', //22,
'++3', //23,
'++4', //24,
'++5', //25,
'++6', //26,
'++7', //27,
'+2ve' //28,
};

} else {
	debugi('Loading standard voicings');
Current.voicings = {
'Octave Down',
'Bass',
'Lower',
'Low',
'High',
'Higher',
'Octave Up'
};

}

Current.numVoicings = sizeof(Current.voicings);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/Profile/initVoicings" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
<VARIABLE name="debugStr=" value="'|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale|add: 48,KeyScale|add: 47,KeyScale'" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/debugStr" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="showDebug=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/showDebug" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="frame=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/frame" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="initFrame=4" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/initFrame" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="enabled=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/enabled" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="channel=Profile.Current.channel" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/channel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="cooldown=" value="0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/cooldown" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-12288,29576,60" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="coolFrames=10" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/coolFrames" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="30569,4,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="currentValues=" value="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/currentValues" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="dejitter=" value="-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/dejitter" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="18,3,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="send=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/send" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,640,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="target=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/target" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="waitFrames=10" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/waitFrames" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="-84,-30208,-84" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="logLevel=3" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/logLevel" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="logInternal=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/logInternal" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="inQueue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/inQueue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="outQueue=-1" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/outQueue" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="0,0,0" kbmouse_scale="0,1,0,1"/>
<VARIABLE name="displayName=0" send="1" osc_target="0" osc_trigger="1" osc_message="/Container/displayName" midi_target="-1" midi_trigger="1" midi_message="0x90,0x90,0,0" midi_scale="0,16383" kbmouse_target="-1" kbmouse_trigger="1" kbmouse_message="289,19968,20" kbmouse_scale="0,1,0,1"/>
<SCRIPT name="debug(msg)" script="if (logLevel <= 1) outputDebug(msg);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/debug" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="stringify(obj)" script="if (sizeof(obj) == 1) return '' + obj[0];

decl str='',i=0, length=sizeof(obj), prop, val;
for (i=0; i < length; i+=2) {
	if (str == '') str = '{ ';
	else str = str + ', ';

  	prop = obj[i];
  	val = obj[i+1];
  	str = str + '' + prop + ':' + val + '';
}
str = str + ' }';
return str;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/stringify" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onShowDebug()" script="show(Debug, showDebug);" trigger_script="showDebug" trigger_type="0" trigger="1" clock="0" clock_div="4" osc_message="/Container/onShowDebug" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onLoad()" script="debugi('-------- Container: onLoad.  logLevel: ' + logLevel);
displayName = 'DNAMENOTSET';
frame = 0;
inQueue = -1;
outQueue = -1;
dejitter = -1;
cooldown = stretch(0, 128); // frames to wait per CC
currentValues = stretch(-1, 128); // hold current MIDI control values

show(Profile, 0);" trigger_script="" trigger_type="5" trigger="1" clock="0" clock_div="4" osc_message="/Container/onLoad" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onFrame()" script="//log('frame: ' + frame);
if (!frame || frame < initFrame) {
	debugi('Container, frame: ' + frame);
	frame = frame+1;

	if (frame == initFrame) {
		startInterface();
	}
	return;
}

decl r, cc, val, src, cur;
decl objlen = 3;

// Process incoming MIDI queue
if (inQueue != -1) {
	debug('---onFrame: inQueue');

	enabled = 0;

	while (inQueue != -1) {
	
		r = subarray(inQueue, 0, objlen);
		inQueue = subarray(inQueue, objlen, sizeof(inQueue)-objlen);
		if (sizeof(inQueue) < objlen) {
			//debug('end MIDI queue');
			inQueue = -1;
		}
		cc = r[0];
		val = r[1];
		src = r[2];
		cur = currentValues[cc];

		if (val == currentValues[cc]) {
			//debug('inQueue VALUE MATCH queue: ' + val + ' current: ' + currentValues[cc]);
			//val = currentValues[cc];
		}
		debug('onCC: ' + cc + ' , ' + val + ' (' + cur + ') src: ' + src + ' nxt: ' + inQueue[0]);
		onCC(cc, val, src);
	}
	
	inQueue = -1;
	enabled = 1;
}

if (outQueue != -1) {
	debug('---onFrame: outQueue');

	while (outQueue != -1) {
	
		r = subarray(outQueue, 0, objlen);
		outQueue = subarray(outQueue, objlen, sizeof(outQueue)-objlen);
		if (sizeof(outQueue) < objlen) {
			//debug('end MIDI queue');
			outQueue = -1;
		}
		cc = r[0];
		val = r[1];
		src = r[2];
		cur = currentValues[cc];

		if (val != currentValues[cc]) {
			debug('outQueue VALUE SHIFT queue: ' + val + ' current: ' + currentValues[cc]);
			val = currentValues[cc];
		}
		debug('MIDI OUT: ' + cc + ' , ' + val + ' (' + cur + ') src: ' + src + ' nxt: ' + outQueue[0]);
		ctlout(target,cc,val,channel);
	}
	
	outQueue = -1;
}



" trigger_script="" trigger_type="1" trigger="1" clock="0" clock_div="4" osc_message="/Container/onFrame" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="log(msg)" script="if (logLevel <= 2) {
	outputDebug(msg);
}
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/log" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="getProfile(key)" script="decl val = getexpression(Profile.Current, key);
debugi('getProfile(' + key + '): ' + stringify(val));
if (sizeof(val) == 1 && !val) log2('BROKEN getProfile: ' + key + ': ' + stringify(val));
return val;" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/getProfile" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onMidi(MIDI_ARGS)" script="decl _cc = MIDI_ARGS[0];
decl _val = MIDI_ARGS[1];
decl _chan = MIDI_ARGS[2] + 1;
log('MIDI IN ' + stringify({
	'CC', _cc, 
	'VAL', _val,
	'CHAN', _chan
}) + ' ' + Profile.ccNames[_cc]);

if (_chan == channel) {
	//debug('ok');
	currentValues[_cc] = _val;
	queueMidiIn(_cc, _val, 'remote');
/*
if (cooldown[_cc]) {
	log('resetting cooldown for CC ' + _cc);
} else {
	//log('starting cooldown for CC ' + _cc);
	dejitter = (dejitter == -1) ? { _cc } : { dejitter, { _cc } };
}
cooldown[_cc] = coolFrames;
*/
	//send = 0;
	//received = {_cc, _val};
	//send = 1;
	/*decl _h = handlers[_cc];
	if (!_h) {
		debug('no handler');
	} else {
		
		decl i = 0, s, obj, prop;
		for (i = 0; i < sizeof(_h); i++) {
			s = _h[i];
			if (s) {
				debug('call: ' + s[0] + ',' + s[1]);
				obj = findobject(s[0]);
				setexpression(obj, s[1], _val);
			}
		}
	}*/

}

/*if (MIDI_ARGS[0] == cc){
	decl val_in = MIDI_ARGS[1];
	decl i;
	for (i=0;i<items;i++){
		if (val_in == data[i]){
			x = replace(stretch(0,items),data[i],i);
			break;
			}		
		}
	}
*/" trigger_script="" trigger_type="3" trigger="1" clock="0" clock_div="4" osc_message="/Container/onMidi" midi_message="0xB0,0xBF,0,127" midi_target="0" flag="1"/>
<SCRIPT name="sendCC(cc, val, extra)" script="cc = round(cc);
val = round(val);

if (cc <= 0) {
	log('BROKEN sendCC cc: ' + extra);
	return;
}

if (val < 0) {
	log('BROKEN sendCC val');
	return;
}
decl dbg = stringify({
	'cc', cc,
	'val', val
}) + ' ' + extra;

if (!enabled) {
	debugi('NO SEND(not enabled)');
	return;
}

debug2('sendCC ' + extra);

decl cv = currentValues[cc];
if (val == cv) {
	log('sendCC: NO SEND(current): ' + dbg);
	return;
}

if (cooldown[cc]) {
	log('NO SEND(cooldown): ' + cooldown[cc] + ' : ' + dbg);
	return;
}

//if (send >= waitFrames) {
//val = round(val);


if (val < 0) {
	log('sendCC: BROKEN');
	return;
}


log('sendCC ' + dbg);
//ctlout(target,cc,val,channel);

currentValues[cc] = val; // store current value

queueMidiOut(cc, val, extra);

// update other controls (simulate incoming)
queueMidiIn(cc, val, extra);

//} else {
//debug('NOSEND(' + send + '):' + dbg);
//}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/sendCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="startInterface()" script="debugi('------Container: START INTERFACE');

// NO MIDI can flow
enabled = 0;

Actions.init();

// Now allow MIDI to flow
enabled = 1;
debugi('MIDI now enabled');
//frame = 0;
//onDeviceChange();

// Initial state" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/startInterface" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="outputDebug(msg)" script="
Debug.lines = {msg, Debug.lines};
if (sizeof(Debug.lines) > 20) {
	Debug.lines = subarray(Debug.lines, 0, 20);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/outputDebug" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="log2(msg)" script="if (logLevel <= 3) {
	outputDebug(msg);
}" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/log2" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="debug2(msg)" script="if (logLevel == 0) outputDebug(msg);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/debug2" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="debugi(msg)" script="if (logInternal) outputDebug('debugi: ' + msg);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/debugi" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="queueMidiIn(cc, val, source)" script="if (!enabled) {
	debug('queueMidiIn: NOT ENABLED'); 
	return;
}
if (val < 0) {
	debug('queueMidiIn: BROKEN');
	return;
}

inQueue = (inQueue == -1) ? {cc, val, source} : { inQueue, {cc, val, source} };
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/queueMidiIn" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="queueMidiOut(cc, val, source)" script="if (!enabled) {
	debug('queueMidiOut: NOT ENABLED'); 
	return;
}
if (val < 0) {
	debug('queueMidiOut: BROKEN');
	return;
}

outQueue = (outQueue == -1) ? {cc, val, source} : { outQueue, {cc, val, source} };
" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/queueMidiOut" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
<SCRIPT name="onCC(cc, val, src)" script="//debug(getattribute(getobject(), 'name') + ': onReceive: ' + cc + ', ' + val + ', ' + src);
Actions.onCC(cc, val, src);" trigger_script="" trigger_type="4" trigger="1" clock="0" clock_div="4" osc_message="/Container/onCC" midi_message="0x90,0x90,0,0" midi_target="-1" flag="1"/>
</WINDOW>
</WINDOW>
</JZML>
